<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>é™„å½• Bï¼šå…¶ä»–è¦ç‚¹</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">è½»æ¾å­¦Javaï¼ˆHead First Javaï¼‰</a></li><li class="chapter-item expanded "><a href="Ch01_Dive_in_A_Quick_Dip_Breaking_the_Surface.html"><strong aria-hidden="true">1.</strong> å¿«é€ŸæŠ•èº«äº Javaï¼šç ´å†°</a></li><li class="chapter-item expanded "><a href="Ch02_Class_and_Objects_A_Trip_to_Objectville.html"><strong aria-hidden="true">2.</strong> ç±»ä¸å¯¹è±¡ï¼šå¯¹è±¡æ‘ä¹‹æ—…</a></li><li class="chapter-item expanded "><a href="Ch03_Primitives_and_References_Know_Your_Variables.html"><strong aria-hidden="true">3.</strong> åŸç”Ÿä¸å¼•ç”¨å˜é‡ï¼šäº†è§£ä½ çš„é‚£äº›å˜é‡</a></li><li class="chapter-item expanded "><a href="Ch04_Methods_Use_Instance_Variables_How_Objects_Behave.html"><strong aria-hidden="true">4.</strong> ç”¨åˆ°å®ä¾‹å˜é‡çš„é‚£äº›æ–¹æ³•ï¼šå¯¹è±¡è¡Œä¸ºæœºåˆ¶</a></li><li class="chapter-item expanded "><a href="Ch05_Writing_a_Program_Extra-Strength_Methods.html"><strong aria-hidden="true">5.</strong> ç¼–å†™ä¸€ä¸ªç¨‹åºï¼šæ–¹æ³•ä¹‹é™„åŠ åŠ›é‡</a></li><li class="chapter-item expanded "><a href="Ch06_Get_to_Know_The_Java_API_Using_the_Java_Library.html"><strong aria-hidden="true">6.</strong> äº†è§£ Java APIï¼šè¿ç”¨ Java çš„åº“</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ç»§æ‰¿å’Œå¤šæ€æœºåˆ¶</li><li class="chapter-item expanded "><a href="Ch07_Inheritance_and_Polymorphism_Better_Living_in_Objectville.html"><strong aria-hidden="true">7.</strong> ç»§æ‰¿ä¸å¤šæ€ï¼šåœ¨å¯¹è±¡æ‘æ›´å¥½çš„è¿‡æ´»</a></li><li class="chapter-item expanded "><a href="Ch08_Interfaces_and_Abstract_Classes.html"><strong aria-hidden="true">8.</strong> æ¥å£åŠæŠ½è±¡ç±»</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ç¼–è¯‘å™¨ã€å †ä¸æ ˆ</li><li class="chapter-item expanded "><a href="Ch09_Constructors_and_Garbage_Collection_Life_and_Death_of_an_Object.html"><strong aria-hidden="true">9.</strong> æ„é€ å™¨ä¸åƒåœ¾å›æ”¶ï¼šå¯¹è±¡çš„ç”Ÿä¸æ­»</a></li><li class="chapter-item expanded "><a href="Ch10_Numbers_and_Statics_Numbers_Matter.html"><strong aria-hidden="true">10.</strong> æ•°å­—ä¸é™æ€å…ƒç´ ï¼šæ•°å­—ä¸ºè¦</a></li><li class="chapter-item expanded "><a href="Ch11_Exception_Handling_Risky_Behavior.html"><strong aria-hidden="true">11.</strong> å¼‚å¸¸å¤„ç†ï¼šå†’é™©è¡Œä¸º</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">GUI</li><li class="chapter-item expanded "><a href="Ch12_Getting_GUI_A_Very_Graphic_Story.html"><strong aria-hidden="true">12.</strong> å¾—åˆ°å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼šä¸€ä¸ªç”šä¸ºå½¢è±¡çš„æ•…äº‹</a></li><li class="chapter-item expanded "><a href="Ch13_Using_Swing_Work_on_Your_Swing.html"><strong aria-hidden="true">13.</strong> è¿ç”¨ Swingï¼šå·¥ä½œäº Swing ä¹‹ä¸Š</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">å¯¹è±¡åºåˆ—åŒ–ä¸æ•°æ®ç»“æ„</li><li class="chapter-item expanded "><a href="Ch14_Serialization_and_File_I_O_Saving_Objects.html"><strong aria-hidden="true">14.</strong> åºåˆ—åŒ–ä¸ºæ–‡ä»¶ I/Oï¼šä¿å­˜å¯¹è±¡</a></li><li class="chapter-item expanded "><a href="Ch15_Networking_and_Threads_Make_a_Connection.html"><strong aria-hidden="true">15.</strong> ç½‘ç»œé€šä¿¡ä¸çº¿ç¨‹ï¼šæ„é€ è¿æ¥</a></li><li class="chapter-item expanded "><a href="Ch16_Collections_and_Generics_Data_Structure.html"><strong aria-hidden="true">16.</strong> é›†åˆä¸æ³›å‹ï¼šæ•°æ®ç»“æ„</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">å®Œç»“éƒ¨åˆ†</li><li class="chapter-item expanded "><a href="Ch17_Package_JARs_and_Deployment_Release_Your_Code.html"><strong aria-hidden="true">17.</strong> æ‰“åŒ…ã€JARs ä¸éƒ¨ç½²ï¼šå‘å¸ƒä»£ç </a></li><li class="chapter-item expanded "><a href="Ch18_Remote_Deployment_with_RMI_Distributed_Computing.html"><strong aria-hidden="true">18.</strong> è¿œç«¯éƒ¨ç½²ä¸ RMIï¼šåˆ†å¸ƒå¼è®¡ç®—</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">é™„å½•</li><li class="chapter-item expanded "><a href="Ch19_Appendix_A.html"><strong aria-hidden="true">19.</strong> é™„å½• Aï¼šåä¸ªå‡ ä¹ä¼šè¿›åˆ°æœ¬ä¹¦çš„é¢˜ç›®</a></li><li class="chapter-item expanded "><a href="Ch20_Appendix_B.html" class="active"><strong aria-hidden="true">20.</strong> é™„å½• Bï¼šå…¶ä»–è¦ç‚¹</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="é™„å½•bå…¶ä»–ç‰¹æ€§"><a class="header" href="#é™„å½•bå…¶ä»–ç‰¹æ€§">é™„å½•Bï¼šå…¶ä»–ç‰¹æ€§</a></h1>
<h2 id="æ³¨è§£è¯­æ³•"><a class="header" href="#æ³¨è§£è¯­æ³•">æ³¨è§£è¯­æ³•</a></h2>
<p><strong>Annotations</strong></p>
<p><em>æ³¨è§£</em>ï¼Œæ˜¯å…ƒæ•°æ®çš„ä¸€ç§å½¢å¼ï¼Œæä¾›äº†ä¸ä½œä¸ºç¨‹åºæœ¬èº«éƒ¨åˆ†çš„ã€æœ‰å…³ç¨‹åºçš„ä¸€äº›æ•°æ®ã€‚æ³¨è§£å¯¹å…¶æ‰€æ³¨è§£ä»£ç è¿ä½œï¼Œå¹¶æœªç›´æ¥å½±å“ï¼ˆ<em>Annotations</em>, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotateï¼‰ã€‚</p>
<p>æ³¨è§£æœ‰ç€å¤šç§ç”¨é€”ï¼Œè¿™äº›ç”¨é€”ä¸­ï¼š</p>
<ul>
<li><strong>ä¸ºç¼–è¯‘å™¨æä¾›ä¿¡æ¯</strong> -- ç¼–è¯‘å™¨å¯ä½¿ç”¨æ³¨è§£æ¥æ¢æµ‹é”™è¯¯æˆ–æŠ‘åˆ¶å‘Šè­¦ä¿¡æ¯ï¼ˆ<strong>Information for the compiler</strong> -- Annotations can be used by the compiler to detect errors or suppress warningsï¼‰ï¼›</li>
<li><strong>ç¼–è¯‘æ—¶ä¸éƒ¨ç½²æ—¶çš„å¤„ç†</strong> -- è½¯ä»¶å·¥å…·å¯å¯¹æ³¨è§£ä¿¡æ¯åŠ ä»¥å¤„ç†ï¼Œä»è€Œç”Ÿæˆä»£ç ã€XMLæ–‡ä»¶ç­‰ç­‰ï¼ˆ<strong>Compile-time and deployment-time processing</strong> -- Software tools can process annotation information to generate code, XML files, and so forthï¼‰;</li>
<li><strong>è¿è¡Œæ—¶çš„å¤„ç†</strong> -- åœ¨è¿è¡Œæ—¶ï¼Œå¯å¯¹ä¸€äº›æ³¨è§£è¿›è¡Œæ£€æŸ¥ï¼ˆ<strong>Runtime processing</strong> -- Some annotations are available to be examined at runtimeï¼‰ã€‚</li>
</ul>
<p>æœ¬è¯¾ç¨‹è§£é‡Šäº†ï¼š</p>
<ul>
<li><a href="#where">å“ªäº›åœ°æ–¹å¯ä»¥ä½¿ç”¨æ³¨è§£è¯­æ³•</a>ã€</li>
<li>å¦‚ä½•è¿ç”¨æ³¨è§£è¯­æ³•ã€</li>
<li><a href="#predefined-annotation-types">Java å¹³å°ä»¥åŠæ ‡å‡†ç‰ˆï¼ˆStandard Edtion, Java SE APIï¼‰ä¸­æœ‰å“ªäº›å¯ç”¨çš„é¢„å®šä¹‰å¥½çš„æ³¨è§£ç±»å‹ï¼ˆannotation typesï¼‰</a>ã€</li>
<li><a href="#type-annotations-and-pluggable-type-systems">ç±»å‹æ³¨è§£å¦‚ä½•ä¸å¯æ’æ‹”ç±»å‹ç³»ç»Ÿç»“åˆä»¥ç¼–å†™å‡ºæœ‰ç€æ›´å¼ºç±»å‹æ£€æŸ¥çš„ä»£ç </a>ï¼Œ</li>
<li><a href="#repeating-annotations">ä»¥åŠæ€æ ·å»å®ç°é‡å¤æ€§æ³¨è§£è¯­æ³•</a>ã€‚</li>
</ul>
<p>ï¼ˆThis lesson explains where annotations can be used, how to apply annotations, what predefined annotation types are available in the Java Platform, Standard Edition(Java SE API), how type annotations can be used in conjuncton with pluggable type systems to write stronger type checking, and how to implement repeating annotations.ï¼‰</p>
<h3 id="æ³¨è§£è¯­æ³•åŸºç¡€"><a class="header" href="#æ³¨è§£è¯­æ³•åŸºç¡€"><a id="annotations-basics"></a>æ³¨è§£è¯­æ³•åŸºç¡€</a></h3>
<p><strong>Annotations Basics</strong></p>
<h4 id="æ³¨è§£è¯­æ³•çš„å½¢å¼"><a class="header" href="#æ³¨è§£è¯­æ³•çš„å½¢å¼">æ³¨è§£è¯­æ³•çš„å½¢å¼</a></h4>
<p><strong>The Format of an Annotation</strong></p>
<p>æ³¨è§£è¯­æ³•çš„æœ€ç®€å•å½¢å¼ï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="language-java">@Entity
</code></pre>
<p>è¿™ä¸ªæ‰€åœ¨ç¬¦å·å­—ç¬¦ï¼ˆ<code>@</code>ï¼‰ï¼Œæ˜¯ç»™ç¼–è¯‘å™¨è¡¨æ˜ï¼Œæ¥ä¸‹æ¥çš„æ˜¯ä¸ªæ³¨è§£ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œé‚£ä¸ªæ³¨è§£çš„åç§°ä¸º <code>Override</code>:</p>
<pre><code class="language-java">@Override
void mySuperMethod() {...}
</code></pre>
<p>æ³¨è§£å¯ä»¥åŒ…å« <em>å…ƒç´ ï¼ˆelementsï¼‰</em>ï¼Œå…ƒç´ å¯ä»¥æ˜¯å…·åçš„æˆ–ä¸å…·åçš„ï¼ŒåŒæ—¶å­˜åœ¨ç€è¿™äº›å…ƒç´ çš„å€¼ï¼š</p>
<pre><code class="language-java">@Author (
    name = &quot;Benjamin Franklin&quot;,
    date = &quot;3/27/2003&quot;
)
class myClass {...}
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="language-java">@SuppressWarnings (value = &quot;unchecked&quot;)
void myMethod() {...}
</code></pre>
<p>åœ¨ä»…æœ‰ä¸€ä¸ªåä¸º <code>value</code> çš„å…ƒç´ æ—¶ï¼Œé‚£ä¹ˆå…ƒç´ åç§°æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<pre><code class="language-java">@SuppressWarnings (&quot;unchecked&quot;)
void myMethod () {...}
</code></pre>
<p>åœ¨æ³¨è§£æ²¡æœ‰å…ƒç´ æ—¶ï¼Œé‚£ä¹ˆé‚£å¯¹æ‹¬å·æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå°±å¦‚åŒåœ¨ä¸Šé¢çš„ <code>Override</code> ç¤ºä¾‹ä¸­é‚£æ ·ã€‚</p>
<p>åœ¨åŒä¸€å£°æ˜ä¸Šï¼Œä½¿ç”¨å¤šä¸ªæ³¨è§£ä¹Ÿæ˜¯å¯èƒ½çš„ï¼š</p>
<pre><code class="language-java">@Author (name = &quot;Jane Doe&quot;)
@EBook
class MyClass {...}
</code></pre>
<p>åœ¨è‹¥å¹²æ³¨è§£æœ‰ç€åŒæ ·ç±»å‹æ—¶ï¼Œæ­¤æ—¶å°±å«é‡å¤æ³¨è§£ï¼ˆa repeating annotationï¼‰ï¼š</p>
<pre><code class="language-java">@Author(name = &quot;Jane Doe&quot;)
@Author(name = &quot;John Smith&quot;)
class MyClass {...}
</code></pre>
<p>ä» Java SE 8 å‘å¸ƒæ‰å¼€å§‹æ”¯æŒé‡å¤æ³¨è§£ã€‚æ›´å¤šçš„æœ‰å…³æƒ…å†µï¼Œè¯·å‚è€ƒ <a href="#repeating-annotations">é‡å¤æ³¨è§£</a></p>
<p>æ³¨è§£ç±»å‹ï¼ˆa Annotation Typeï¼‰å¯ä»¥æ˜¯å®šä¹‰åœ¨ Java SE API çš„ <code>java.lang</code> æˆ– <code>java.lang.annotation</code> åŒ…ä¸­ç±»å‹ä¹‹ä¸€ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>Override</code>ä¸ <code>SuppressWarnings</code>ï¼Œå°±æ˜¯ <a href="#predefined-annotation-types">é¢„å®šä¹‰çš„Java æ³¨è§£ï¼ˆpredefined Java annotationsï¼‰</a>ã€‚å®šä¹‰è‡ªå·±çš„æ³¨è§£ç±»å‹ï¼Œä¹Ÿæ˜¯å¯èƒ½çš„ã€‚å‰é¢ç¤ºä¾‹ä¸­çš„ <code>Author</code> ä¸ <code>EBook</code> å°±å±äºè‡ªå®šä¹‰æ³¨è§£ç±»å‹ã€‚</p>
<h4 id="å“ªäº›åœ°æ–¹å¯ä»¥ä½¿ç”¨æ³¨è§£è¯­æ³•"><a class="header" href="#å“ªäº›åœ°æ–¹å¯ä»¥ä½¿ç”¨æ³¨è§£è¯­æ³•"><a id="where"></a>å“ªäº›åœ°æ–¹å¯ä»¥ä½¿ç”¨æ³¨è§£è¯­æ³•</a></h4>
<p>å¯åœ¨å°†æ³¨è§£åº”ç”¨åœ¨å„ç§å£°æ˜ä¸Šï¼šç±»ã€å­—æ®µã€æ–¹æ³•ï¼Œä»¥åŠå…¶ä»–ä¸€äº›ç¨‹åºå…ƒç´ çš„å£°æ˜ã€‚å½“åœ¨æŸä¸ªå£°æ˜ä¸Šè¿ç”¨äº†æ³¨è§£è¯­æ³•æ—¶ï¼Œä¾ç…§çº¦å®šï¼Œæ¯æ¡æ³¨è§£å¸¸å¸¸å æ®è‡ªå·±çš„ä¸€è¡Œã€‚</p>
<p>è‡ªJava SE 8 å‘å¸ƒå¼€å§‹ï¼Œæ³¨è§£è¯­æ³•è¿˜å¯åº”ç”¨åˆ°ç±»å‹çš„ <em>è¿ç”¨</em>ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p>
<ul>
<li>åº”ç”¨åˆ°ç±»å®ä¾‹çš„åˆ›å»ºè¡¨è¾¾å¼ï¼š</li>
</ul>
<pre><code class="language-java">new @Interned MyObject();
</code></pre>
<ul>
<li>ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼š</li>
</ul>
<pre><code class="language-java">myString = (@NonNull String) str;
</code></pre>
<ul>
<li><code>implements</code> å­è¯­å¥ï¼ˆ<code>implements</code> clauseï¼‰ï¼š</li>
</ul>
<pre><code class="language-java">class UnmodifioableList&lt;T&gt; implements
    @Readonly List&lt;@Readonly T&gt; {...}
</code></pre>
<ul>
<li>æŠ›å‡ºå¼‚å¸¸çš„å£°æ˜ï¼ˆThrown exception declarationsï¼‰ï¼š</li>
</ul>
<pre><code class="language-java">void monitorTemperature() throws
    @Critical TemperatureException {...}
</code></pre>
<p>è¿™ç§å½¢å¼çš„æ³¨è§£ï¼Œå«åš <em>ç±»å‹æ³¨è§£ï¼ˆa type annotationï¼‰</em>ã€‚æœ‰å…³ç±»å‹æ³¨è§£çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="#type-annotations-and-pluggable-type-systems">ç±»å‹æ³¨è§£ä¸å¯æ’æ‹”ç±»å‹ç³»ç»Ÿï¼ˆType Annotations and Pluggable Type Systemsï¼‰</a>ã€‚</p>
<h3 id="æ³¨è§£ç±»å‹çš„å£°æ˜"><a class="header" href="#æ³¨è§£ç±»å‹çš„å£°æ˜">æ³¨è§£ç±»å‹çš„å£°æ˜</a></h3>
<p><strong>Declaring a Annotation Type</strong></p>
<blockquote>
<p><strong>æ³¨</strong>ï¼šé™¤äº† <code>java.lang</code> å’Œ <code>java.lang.annotations</code> åŒ…ä¸­é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹ï¼Œå¯¹åº”å®šåˆ¶æ³¨è§£ï¼Œå‡éœ€å…ˆå£°æ˜æ³¨è§£ç±»å‹ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥æ³¨è§£ç±»å‹ä¸‹çš„æ³¨è§£å®ä¾‹ã€‚æ‰€æœ‰æ³¨è§£ç±»å‹ï¼Œéƒ½æ˜¯ç‰¹æ®Šçš„æ¥å£ï¼Œç±»å‹ä¸º <code>@interface</code>ã€‚</p>
</blockquote>
<p>è®¸å¤šçš„æ³¨è§£ï¼Œåœ¨ä»£ç ä¸­éƒ½æ˜¯èµ·åˆ°æ›¿ä»£æ³¨é‡Šçš„ä½œç”¨ã€‚</p>
<p>è®¾æƒ³æŸä¸ªè½¯ä»¶å›¢é˜Ÿï¼Œä»–ä»¬åœ¨ç¼–å†™æ‰€æœ‰ç±»çš„ä»£ç ä½“æ—¶ï¼Œä¼ ç»Ÿä¸Šéƒ½æ˜¯ä»¥æä¾›è¿™äº›ç±»é‡è¦ä¿¡æ¯çš„æ³¨é‡Šå¼€å§‹çš„ï¼š</p>
<pre><code class="language-java">public class Generation3List extends Generation2List {
    // Author: John Doe
    // Date: 3/17/2002
    // Current revision: 6
    // Last modified: 4/12/2004
    // By: Jane Doe
    // Reviewers: Alice, Bill, Cindy
    
    // çœŸæ­£çš„ç±»ä»£ç ä»è¿™é‡Œå¼€å§‹
}
</code></pre>
<p>è€Œè¦ä»¥æ³¨è§£æ¥åŠ å…¥è¿™äº›åŒæ ·å…ƒæ•°æ®ï¼Œå°±å¿…é¡»é¦–å…ˆå®šä¹‰å‡ºè¿™ä¸ª <em>æ³¨è§£ç±»å‹ï¼ˆannotation typeï¼‰</em>ã€‚å®šä¹‰æ­¤æ³¨è§£ç±»å‹çš„è¯­æ³•ä¸ºï¼š</p>
<pre><code class="language-java">@interface ClassPreamble {
    String author();
    String date();
    int currentVersion() default 1;
    String lastModified() default &quot;N/A&quot;;
    String lastModifiedBy() default &quot;N/A&quot;;
    // æ³¨æ„ä¸‹é¢è¿™ä¸ªä½¿ç”¨åˆ°æ•°ç»„
    String[] reviewers();
}
</code></pre>
<p>è¿™ä¸ªæ³¨è§£ç±»å‹å®šä¹‰ï¼Œçœ‹èµ·æ¥ç±»ä¼¼äºæ¥å£å®šä¹‰ï¼Œå…¶ä¸­å…³é”®å­— <code>interface</code> å‰é¢å† ä»¥äº†ä½å¤„ç¬¦å·ï¼ˆ<code>@</code>ï¼‰ï¼ˆå½“è¿™ä¸ªä½å¤„ç¬¦å·æ˜¯åœ¨æ³¨è§£ç±»å‹ä¸­æ—¶ï¼Œå°±ç­‰äºä½å¤„<code>AT</code>ï¼‰ã€‚æ‰€æœ‰æ³¨è§£ç±»å‹ï¼Œéƒ½å±äº <em>æ¥å£</em> çš„ä¸€ç§å½¢å¼ï¼Œ<a href="Ch08_Interfaces_and_Abstract_Classes.html#interface_rescue">æœ¬è¯¾ç¨‹ç¨å</a>ä¼šè®²åˆ°è¿™ä¸€ç‚¹ã€‚æ­¤åˆ»è¿˜ä¸éœ€è¦æŒæ¡ä»€ä¹ˆæ˜¯æ¥å£ã€‚</p>
<p>ä¸Šé¢æ³¨è§£å®šä¹‰çš„ä»£ç ä½“ï¼ŒåŒ…å«äº† <em>æ³¨è§£ç±»å‹å…ƒç´ ï¼ˆannotation type elementï¼‰</em> çš„ä¸€äº›å£°æ˜ï¼Œè¿™äº›ä»€ä¹ˆçœ‹èµ·æ¥å¾ˆåƒæ˜¯ä¸€äº›æ–¹æ³•ã€‚è¯·ç•™æ„è¿™äº›æ³¨è§£ç±»å‹å…ƒç´ ï¼Œå¯å®šä¹‰ä¸€äº›å¯é€‰çš„é»˜è®¤å€¼ã€‚</p>
<p>åœ¨æ³¨è§£ç±»å‹å®šä¹‰å¥½ä¹‹åï¼Œå¸¦ä¸Šå¡«å…¥çš„å„ä¸ªå–å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨é‚£ç§ç±»å‹çš„æ³¨è§£äº†ï¼Œå¦‚åŒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="language-java">@ClassPreamble {
    author = &quot;John Doe&quot;,
    date = &quot;3/17/2002&quot;,
    currentRevision = 6,
    lastModified = &quot;4/12/2004&quot;,
    lastModifiedBy = &quot;Jane Doe&quot;,
    // è¯·æ³¨æ„è¿™é‡Œçš„æ•°ç»„æ³¨è§£
    reviewers = {&quot;Alice&quot;, &quot;Bob&quot;, &quot;Cindy&quot;}
}
public class Generation3List extends Generation2List {
    // ç±»çš„ä»£ç ä»è¿™é‡Œå¼€å§‹
}
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šä¸ºäº†è®© <code>@ClassPreamble</code> ä¸­çš„ä¿¡æ¯ï¼Œåœ¨ <code>Javadoc</code> æ‰€ç”Ÿæˆçš„æ–‡æ¡£ä¸­å‡ºç°ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä»¥ <code>@Documented</code> æ³¨è§£ï¼Œæ¥å¯¹ <code>@ClassPreamble</code> çš„å®šä¹‰è¿›è¡Œæ³¨è§£ï¼ˆTo make the information in <code>@ClassPreamble</code> appear in <code>Javadoc-generated</code> documentation, you must annote the <code>@ClassPreamble</code> definition with the <code>@Documented</code> annotationï¼‰ï¼š</p>
</blockquote>
<pre><code class="language-java">// ä¸ºä½¿ç”¨ @Documented æ³¨è§£ç±»å‹ï¼Œå°±è¦å¯¼å…¥è¯¥åŒ…
import java.lang.annotation.*;

@Documented
@interface ClassPreamble {
    // é‚£äº›æ³¨è§£å…ƒç´ çš„å®šä¹‰
}
</code></pre>
<h3 id="javaä¸­é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹"><a class="header" href="#javaä¸­é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹"><a id="predefined-annotation-types"></a>Javaä¸­é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹</a></h3>
<p><strong>Predefined Annotation Types</strong></p>
<p>åœ¨ Java SE API ä¸­ï¼Œé¢„å…ˆå®šä¹‰äº†ä¸€äº›æ³¨è§£ç±»å‹ã€‚å…¶ä¸­ä¸€äº›ä¸ºJavaç¼–è¯‘å™¨ä½¿ç”¨åˆ°ï¼Œå¦ä¸€äº›æ˜¯åº”ç”¨åˆ°åˆ«çš„æ³¨è§£çš„ã€‚</p>
<h4 id="javaè¯­è¨€ç”¨åˆ°çš„æ³¨è§£ç±»å‹"><a class="header" href="#javaè¯­è¨€ç”¨åˆ°çš„æ³¨è§£ç±»å‹">Javaè¯­è¨€ç”¨åˆ°çš„æ³¨è§£ç±»å‹</a></h4>
<p><strong>Annotation Types Used by the Java Language</strong></p>
<p>åœ¨åŒ… <code>java.lang</code> ä¸­é¢„å®šä¹‰çš„æ³¨è§£ç±»å‹ä¸ºï¼š<code>@Deprecated</code>ã€<code>@Override</code>åŠ <code>SuppressWarnings</code>ã€‚</p>
<ul>
<li><strong><code>@Deprecated</code></strong> <code>@Deprecated</code> æ³¨è§£è¡¨æ˜å…¶æ‰€æ ‡è®°çš„å…ƒç´ ï¼Œæ˜¯ <em>å·²å¼ƒç”¨çš„</em> ä¸”ä¸åº”å†è¢«ä½¿ç”¨ã€‚åœ¨ç¨‹åºä½¿ç”¨äº†å¸¦æœ‰ <code>@Deprecated</code> æ³¨è§£çš„æ–¹æ³•ã€ç±»æˆ–å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šç”Ÿæˆä¸€æ¡å‘Šè­¦ä¿¡æ¯ã€‚è€Œåœ¨æŸä¸ªå…ƒç´ ä¸ºå·²è¢«å¼ƒç”¨æ—¶ï¼Œå°±åº”åƒä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¸€æ ·ï¼Œä½¿ç”¨ <code>Javadoc</code> çš„ <code>@deprecated</code> æ ‡ç­¾ï¼Œå°†å…¶åœ¨æ–‡æ¡£ä¸­è®°å½•ä¸‹æ¥ã€‚åœ¨<code>Javadoc</code>çš„æ³¨é‡Šä¸­ï¼Œå’Œåœ¨æ³¨è§£è¯­æ³•ä¸­åŒæ—¶ä½¿ç”¨ä½å¤„ç¬¦å·ï¼ˆ<code>@</code>ï¼‰çš„åšæ³•ï¼Œå¹¶éå·§åˆï¼š<code>Javadoc</code>ä¸æ³¨è§£è¯­æ³•ï¼Œåœ¨æ¦‚å¿µä¸Šæ˜¯æœ‰å…³è”çš„ã€‚åŒæ—¶ï¼Œè¯·ç•™æ„<code>Javadoc</code>çš„æ ‡ç­¾æ˜¯ä»¥å°å†™çš„ <em><code>d</code></em> æ‰“å¤´çš„ï¼Œè€Œæ³¨è§£è¯­æ³•æ˜¯ä»¥å¤§å†™çš„ <code>D</code> æ‰“å¤´çš„ã€‚</li>
</ul>
<pre><code class="language-java">    // æ¥ä¸‹æ¥æ˜¯ Javadoc çš„æ³¨é‡Š
     /**
      * @deprecated
      * ç»™å‡ºäº†ä¸ºä½•è¿™ä¸ªæ–¹æ³•è¢«å¼ƒç”¨çš„è§£é‡Š
      */
     @Deprecated
     static void deprecatedMethod() {}
}
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<a href="https://stackoverflow.com/questions/40969698/deprecated-method-not-mentioned-in-javadoc">deprecated method not mentioned in javadoc</a>
<code>javadoc</code>é»˜è®¤åªæ”¶é›† <code>public</code> æˆ– <code>protected</code> å…ƒç´ çš„æ–‡æ¡£ã€‚</p>
</blockquote>
<ul>
<li><strong><code>@Override</code></strong> <code>@Override</code> æ³¨è§£å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¯¥å…ƒç´ æ˜¯è¦é‡å†™åœ¨æŸä¸ªè¶…ç±»ä¸­å£°æ˜çš„å…ƒç´ ã€‚åœ¨ <a href="Ch07_Inheritance_and_Polymorphism_Better_Living_in_Objectville.html">ç»§æ‰¿ä¸å¤šæ€æœºåˆ¶</a> ä¸­è®¨è®ºäº†æ–¹æ³•çš„é‡å†™ã€‚</li>
</ul>
<pre><code class="language-java">// å°†æ–¹æ³•æ ‡è®°ä¸ºä¸€ä¸ªå·²è¢«é‡å†™çš„è¶…ç±»æ–¹æ³•
@Override
int overriddenMethod () {}
</code></pre>
<p>å°½ç®¡åœ¨é‡å†™æŸä¸ªæ–¹æ³•æ—¶ï¼Œå¹¶ä¸è¦æ±‚ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œä¸è¿‡è¿™æ ·åšå¯ä»¥é˜²æ­¢é”™è¯¯å‘ç”Ÿã€‚åœ¨æŸä¸ªä»¥ <code>@Override</code> æ ‡è®°çš„æ–¹æ³•ï¼Œæœªèƒ½æ­£ç¡®é‡å†™å…¶è¶…ç±»çš„æŸä¸ªæ–¹æ³•æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šç”Ÿæˆä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ã€‚</p>
<ul>
<li><strong><code>@SuppressWarnings</code></strong> <code>@SuppressWarnings</code> æ³¨è§£ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¦æŠ‘åˆ¶ä¸€äº›æœ¬æ¥ä¼šç”Ÿæˆçš„å‘Šè­¦ä¿¡æ¯ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨äº†æŸä¸ªå·²è¢«å¼ƒç”¨çš„æ–¹æ³•ï¼Œè¿›è€Œç¼–è¯‘å™¨ä¸€èˆ¬ä¼šç”Ÿæˆä¸€æ¡å‘Šè­¦ä¿¡æ¯ã€‚ä¸è¿‡åœ¨æ­¤å®ä¾‹ä¸­ï¼Œç”±äºè¿™ä¸ªæ³¨è§£ï¼Œè€Œå¯¼è‡´è¯¥å‘Šè­¦ä¿¡æ¯è¢«æŠ‘åˆ¶ä¸‹æ¥äº†ã€‚</li>
</ul>
<pre><code class="language-java">// è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªå·²è¢«å¼ƒç”¨çš„æ–¹æ³•ï¼Œå¹¶å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦ç”Ÿæˆä¸€æ¡å‘Šè­¦æ¶ˆæ¯
@SuppressWarnings (&quot;deprecation&quot;)
void useDeprecatedMethod () {
    // è¿™é‡Œçš„å·²è¢«å¼ƒç”¨å‘Šè­¦ï¼Œå°±è¢«æŠ‘åˆ¶äº†
    objectOne.deprecatedMethod();
}
</code></pre>
<p>æ‰€æœ‰ç¼–è¯‘å™¨å‘Šè­¦ï¼Œéƒ½æ˜¯å±äºæŸä¸ªç±»åˆ«çš„ã€‚Java è¯­è¨€è§„èŒƒï¼ˆThe Java Language Specificationï¼‰åˆ—å‡ºäº†ä¸¤ä¸ªç±»åˆ«ï¼š<code>deprecation</code> ä¸ <code>unchecked</code>ã€‚åœ¨ç¢°åˆ°é‚£äº›å¼•å…¥ <a href="Ch16_Collections_and_Generics_Data_Structure.html">æ³›å‹</a> ä¹‹å‰æ‰€ç¼–å†™çš„è€æ—§ä»£ç æ—¶ï¼Œå…¶ä¸­çš„ <code>unchecked</code> å‘Šè­¦ä¾¿ä¼šå‡ºç°ã€‚è¦å°†è¿™å¤šä¸ªç±»åˆ«çš„å‘Šè­¦ç»™æŠ‘åˆ¶æ‰ï¼Œå°±è¦ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š</p>
<pre><code class="language-java">@SuppressWarnings({&quot;unchecked&quot;, &quot;deprecation&quot;})
</code></pre>
<ul>
<li><strong><code>@SafeVarargs</code></strong> åœ¨å¯¹æŸä¸ªæ–¹æ³•æˆ–æ„é€ å™¨åº”ç”¨ <code>@SafeVarargs</code> æ³¨è§£æ—¶ï¼Œå°±å‡å®šäº†ä»£ç ä¸ä¼šåœ¨å…¶ <code>varargs</code> å®å‚ä¸Šï¼Œæ‰§è¡Œæ½œåœ¨ä¸å®‰å…¨çš„æ“ä½œã€‚åœ¨ä½¿ç”¨äº†æ­¤æ³¨è§£ç±»å‹æ—¶ï¼Œé‚£äº›æœªå—æ£€æŸ¥çš„ã€ä¸ <code>varargs</code> æœ‰å…³çš„å‘Šè­¦ï¼Œå°±ä¼šè¢«æŠ‘åˆ¶ï¼ˆ<code>@SafeVarargs</code> annotation, when applied to a method or constructor, asserts that the code does not perform potentially unsafe oprations on its <code>varargs</code> parameter. When this annotation type is used, unchecked warnings relating to <code>varargs</code> are suppressedï¼‰ã€‚</li>
<li><strong><code>@FunctionalInterface</code></strong> <code>@FunctionalInterface</code> æ³¨è§£ï¼Œæ˜¯åœ¨ Java SE 8 ä¸­å¼•å…¥çš„ï¼Œè¡¨ç¤ºå…¶æ‰€æ³¨è§£çš„ç±»å‹å£°æ˜ï¼Œæ˜¯è®¡åˆ’ä½œä¸ºJavaè¯­è¨€è§„èŒƒä¸­æ‰€å®šä¹‰çš„åŠŸèƒ½æ€§æ¥å£ï¼ˆ<code>@FunctionalInterface</code> annotation, introduced in Java SE 8, indicates that the type declaration is intended to be a functional interface, as defined by the Java Language Specificationï¼‰ã€‚</li>
</ul>
<h4 id="é€‚ç”¨äºå…¶ä»–æ³¨è§£çš„æ³¨è§£"><a class="header" href="#é€‚ç”¨äºå…¶ä»–æ³¨è§£çš„æ³¨è§£">é€‚ç”¨äºå…¶ä»–æ³¨è§£çš„æ³¨è§£</a></h4>
<p><strong>Annotations That Apply to Other Annotations</strong></p>
<p>é€‚ç”¨äºå…¶ä»–æ³¨è§£çš„æ³¨è§£ï¼Œå«åš <em>å…ƒæ³¨è§£ï¼ˆmeta-annotationsï¼‰</em>ã€‚åœ¨ <code>java.lang.annotation</code> åŒ…ä¸­ï¼Œå®šä¹‰äº†è‹¥å¹²å…ƒæ³¨è§£ç±»å‹ã€‚</p>
<ul>
<li><strong><code>@Retention</code></strong> <code>@Retention</code> æ³¨è§£æŒ‡å®šäº†æ‰€æ ‡è®°çš„é‚£äº›æ³¨è§£è¯¥å¦‚ä½•å­˜å‚¨ï¼ˆ<code>Retention</code> annotation specifies how the marked annotation is storedï¼‰:</li>
<li><strong><code>@Documented</code></strong> <code>@Documented</code> æ³¨è§£è¡¨ç¤ºä¸è®ºæŒ‡å®šæ³¨è§£åœ¨ä½•æ—¶è¢«ä½¿ç”¨åˆ°ï¼Œé‚£äº›å…ƒç´ éƒ½åº”ä½¿ç”¨ <code>Javadoc</code> å·¥å…·ä»¥æ–‡æ¡£åŒ–å¤„ç†ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ³¨è§£æ˜¯æ²¡æœ‰åŒ…å«åœ¨ <code>Javadoc</code> ä¸­çš„ã€‚<code>@Documented</code> annotation indicates that whenever the specified annotation is used those elements should be documented using the <code>Javadoc</code> toolï¼‰ã€‚æœ‰å…³ <code>Javadoc</code> çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="#javadoc-tool"><code>Javadoc</code> å·¥å…·éƒ¨åˆ†</a>ã€‚</li>
</ul>
<ul>
<li>
<p><strong><code>Target</code></strong> <code>Target</code> æ³¨è§£å¯¹å¦ä¸€æ³¨è§£è¿›è¡Œæ ‡è®°ï¼Œä»¥é™åˆ¶æ‰€æ ‡è®°çš„æ³¨è§£å¯é€‚ç”¨çš„Javaå…ƒç´ ç§ç±»ã€‚<code>@Target</code> æ³¨è§£ï¼Œä¼šå°†ä»¥ä¸‹çš„ä¸€äº›å…ƒç´ ç±»å‹ï¼ŒæŒ‡å®šä¸ºä»–çš„å–å€¼ï¼š</p>
<ul>
<li><code>ElementType.ANNOTATION_TYPE</code> - è¢« <code>@Target</code> æ³¨è§£æ ‡è®°çš„æ³¨è§£å¯é€‚ç”¨äºå¦ä¸€æ³¨è§£ç±»å‹ï¼›</li>
<li><code>ElementType.CONSTRUCTOR</code> - è¢«å…¶æ ‡è®°çš„æ³¨è§£å¯é€‚ç”¨äºæ„é€ å™¨ï¼›</li>
<li><code>ElementType.FIELD</code> - å¯é€‚ç”¨äºå­—æ®µæˆ–å±æ€§ï¼›</li>
<li><code>ElementType.LOCAL_VARIABLE</code> - å¯é€‚ç”¨äºæœ¬åœ°å˜é‡ï¼›</li>
<li><code>ElementType.METHOD</code> - å¯é€‚ç”¨äºæ–¹æ³•çº§åˆ«çš„æ³¨è§£ï¼›</li>
<li><code>ElementType.PACKAGE</code> - å¯é€‚ç”¨äºåŒ…çš„å£°æ˜ï¼›</li>
<li><code>ElementType.PARAMETER</code> - å¯é€‚ç”¨äºæ–¹æ³•çš„å‚æ•°ï¼›</li>
<li><code>ElementType.Type</code> - å¯é€‚ç”¨äºç±»çš„ä»»æ„å…ƒç´ ã€‚</li>
</ul>
</li>
</ul>
<ul>
<li><strong><code>@Inherited</code></strong> <code>@Inherited</code> æ³¨è§£è¡¨ç¤ºå…¶æ‰€æ ‡è®°çš„æ³¨è§£ç±»å‹ï¼Œå¯ä»è¶…ç±»ç»§æ‰¿åˆ°ï¼ˆ<code>@Inherited</code> annotation indicates that the annotation type can be inherited from the super classï¼‰ã€‚ï¼ˆé»˜è®¤æ˜¯ä¸å¯ä»¥ä»è¶…ç±»ç»§æ‰¿çš„ã€‚ï¼‰åœ¨ç”¨æˆ·æŸ¥è¯¢æŸä¸ªæ³¨è§£ç±»å‹ï¼Œè€Œè¯¥ç±»åˆæ²¡æœ‰è¿™ä¸ªç±»å‹çš„æ³¨è§£æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹è¿™ä¸ªç±»çš„è¶…ç±»æŸ¥è¯¢æ­¤æ³¨è§£ç±»å‹ã€‚æ­¤æ³¨è§£ä»…é€‚ç”¨äºç±»çš„å£°æ˜ã€‚</li>
<li><strong><code>@Repeatable</code></strong> <code>@Repeatable</code> æ³¨è§£ï¼Œæ˜¯åœ¨Java SE 8 ä¸­å¼•å…¥çš„ï¼Œè¡¨ç¤ºæ‰€å…¶æ‰€æ ‡è®°çš„æ³¨è§£ï¼Œå¯å¤šæ¬¡åº”ç”¨åˆ°åŒæ„å£°æ˜æˆ–ç±»å‹ç”¨é€”ã€‚æ›´å¤šçš„æœ‰å…³ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="#repeating-annotations">é‡å¤æ³¨è§£ï¼ˆRepeating Annotationsï¼‰</a>ã€‚</li>
</ul>
<h3 id="ç±»å‹æ³¨è§£ä¸å¯æ’æ‹”ç±»å‹ç³»ç»Ÿ"><a class="header" href="#ç±»å‹æ³¨è§£ä¸å¯æ’æ‹”ç±»å‹ç³»ç»Ÿ"><a id="type-annotations-and-pluggable-type-systems"></a>ç±»å‹æ³¨è§£ä¸å¯æ’æ‹”ç±»å‹ç³»ç»Ÿ</a></h3>
<p><strong>Type Annotations and Pluggable Type Systems</strong></p>
<p>åœ¨ Java SE 8 å‘å¸ƒä¹‹å‰ï¼Œæ³¨è§£åªèƒ½é€‚ç”¨äºå£°æ˜ã€‚è€Œè‡ªJava SE 8 å‘å¸ƒå¼€å§‹ï¼Œæ³¨è§£å°±è¿˜å¯ä»¥é€‚ç”¨åˆ°ä»»ä½• <em>ç±»å‹ç”¨é€”ï¼ˆtype useï¼‰</em> äº†ã€‚è¿™æ„å‘³ç€åœ¨æ‰€æœ‰ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ³¨è§£ã€‚æœ‰ç”¨åˆ°ç±»å‹ä¹‹å¤„çš„ä¸€äº›ç¤ºä¾‹ï¼ŒåŒ…æ‹¬ç±»å®ä¾‹åˆ›å»ºè¡¨è¾¾å¼ï¼ˆ<code>new</code>ï¼‰ã€ç±»å‹è½¬æ¢ï¼ˆcastsï¼‰ã€<code>implements</code> å­è¯­å¥ï¼Œä»¥åŠ <code>throws</code> å­è¯­å¥ç­‰ã€‚è¿™ç§å½¢å¼çš„æ³¨è§£ï¼Œè¢«ç§°ä¸º <em>ç±»å‹æ³¨è§£ï¼ˆtype annotationï¼‰</em>ï¼Œåœ¨ä¹‹å‰çš„ <a href="#annations-basics">æ³¨è§£åŸºç¡€</a>é‚£é‡Œï¼Œç»™å‡ºäº†å‡ ä¸ªç¤ºä¾‹ã€‚</p>
<p>ä¹‹æ‰€ä»¥åˆ›å»ºå‡ºè¿™äº›ç±»å‹æ³¨è§£ï¼Œæ˜¯ä¸ºäº†ä»¥ç¡®ä¿ä»¥æ›´å¼ºå¤§çš„ç±»å‹æ£€æŸ¥æ–¹å¼ï¼Œæ”¯æŒå¯¹Javaç¨‹åºçš„åˆ†æã€‚Java SE 8å‘å¸ƒï¼Œå¹¶æœªæä¾›ç±»å‹æ£€æŸ¥æ¡†æ¶ï¼Œä¸è¿‡Java SE 8 æ˜¯å…è®¸ç¼–å†™ï¼ˆæˆ–ä¸‹è½½ï¼‰ä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå¯æ’æ‹”å¼æ¨¡ç»„å®ç°çš„ã€ä¸Java ç¼–è¯‘å™¨ç»“åˆä½¿ç”¨çš„ç±»å‹æ£€æŸ¥æ¡†æ¶çš„ï¼ˆType annotations were created to support improved analysis of Java programs way of ensuring stronger type checking. The Java SE 8 release does not provide a type checking framework, but it allows you to write(or download) a type checking framework that is implemented as one or more pluggable modules that are used in conjunction with the Java compilerï¼‰ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨æƒ³è¦ç¨‹åºä¸­æŸä¸ªç‰¹å®šå˜é‡ç»ä¸è¢«èµ‹å€¼ <code>null</code>ï¼Œä»¥æœŸæœ›é¿å…è§¦å‘ <code>NullPointerException</code>ã€‚é‚£ä¹ˆå°±å¯ä»¥ç¼–å†™ä¸€ä¸ªå®šåˆ¶çš„æ’ä»¶ï¼Œæ¥å¯¹æ­¤è¿›è¡Œæ£€æŸ¥ã€‚éšåå°±è¦å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œæ¥å¯¹é‚£ä¸ªç‰¹å®šå˜é‡è¿›è¡Œæ³¨è§£ï¼Œä»è€Œè¡¨æ˜å…¶ç»ä¸ä¼šè¢«èµ‹å€¼ <code>null</code>ã€‚æ­¤å˜é‡å£°æ˜çœ‹èµ·æ¥å°†åƒè¿™æ ·ï¼š</p>
<pre><code class="language-java">@NonNull String str;
</code></pre>
<p>åœ¨ç¼–è¯‘æ­¤ä»£ç æ—¶ï¼Œå°±è¦åœ¨å‘½ä»¤è¡ŒåŒ…å«è¿› <code>NonNull</code> æ¨¡ç»„ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨æ¢æµ‹åˆ°æ½œåœ¨é—®é¢˜æ—¶ï¼Œå°±ä¼šæ‰“å°å‡ºå‘Šè­¦ä¿¡æ¯ï¼Œè¿›è€Œå…è®¸å¯¹ä»£ç åŠ ä»¥ä¿®æ”¹ï¼Œä»¥é¿å…é”™è¯¯ã€‚åœ¨çº æ­£äº†ä»£ç è€Œæ¶ˆé™¤äº†å…¨éƒ¨å‘Šè­¦ä¹‹åï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´è¿™ç‰¹å®šé”™è¯¯ä¾¿ä¸å†ä¼šå‡ºç°äº†ã€‚</p>
<p>å¯ä½¿ç”¨å¤šä¸ªç±»å‹æ£€æŸ¥æ¨¡ç»„ï¼ˆmultiple type-checking modulesï¼‰ï¼Œå…¶ä¸­å„ä¸ªæ¨¡ç»„å¯¹ä¸åŒç±»åˆ«å¤šç»´è¿›è¡Œæ£€æŸ¥ã€‚è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥åœ¨Javaç±»å‹ç³»ç»Ÿä¹‹ä¸Šè¿›è¡Œæ„å»ºï¼Œåœ¨éœ€è¦è¿™äº›ç‰¹å®šç±»å‹æ£€æŸ¥çš„å„ä¸ªæ—¶é—´ç‚¹ã€ä½ç½®ï¼ŒæŒ‰éœ€æ·»åŠ è¿™äº›ç±»å‹æ£€æŸ¥ã€‚</p>
<p>æ˜æ™ºåœ°ä½¿ç”¨ç±»å‹æ³¨è§£ï¼ŒåŠ ä¸Šå¯æ’æ‹”ç±»å‹æ£€æŸ¥å™¨ï¼ˆpluggable type checkersï¼‰çš„å­˜åœ¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¼–å†™å‡ºæ›´åŠ å¼ºå¤§åˆä¸ä¼šå‡ºé”™çš„ä»£ç äº†ã€‚</p>
<p>åœ¨è®¸å¤šæƒ…å½¢ä¸­ï¼Œæ˜¯ä¸å¿…ç¼–å†™è‡ªå·±çš„ç±»å‹æ£€æŸ¥æ¨¡ç»„çš„ã€‚æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹ä»¥åŠå®Œæˆäº†è¿™æ–¹é¢çš„å·¥ä½œã€‚æ¯”å¦‚ï¼Œæˆ–è®¸ä¼šåˆ©ç”¨åˆ°åç››é¡¿å¤§å­¦æ‰€åˆ›å»ºçš„æ£€æŸ¥å™¨æ¡†æ¶ <code>Checker Framework</code>ã€‚è¯¥æ¡†æ¶å°±åŒ…å«äº†<code>NonNull</code> æ¨¡ç»„ï¼Œè¿˜æœ‰æ­£åˆ™è¡¨è¾¾å¼æ¨¡ç»„ï¼ˆa regular moduleï¼‰ï¼Œä»¥åŠäº’æ–¥é”ï¼ˆa mutex lock moduleï¼‰ã€‚æ›´å¤šæœ‰å…³è¯¥æ£€æŸ¥å™¨æ¡†æ¶çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://checkerframework.org/">æ£€æŸ¥å™¨æ¡†æ¶</a>ã€‚</p>
<h3 id="é‡å¤æ³¨è§£"><a class="header" href="#é‡å¤æ³¨è§£"><a id="repeating-annotations"></a>é‡å¤æ³¨è§£</a></h3>
<p><strong>Repeating Annotations</strong></p>
<p>æœ‰äº›æƒ…å†µä¸‹ï¼Œä¼šå¸Œæœ›å°†åŒä¸€æ³¨è§£åº”ç”¨åˆ°å£°æ˜æˆ–ç±»å‹è¿ç”¨ï¼ˆa declaration or type useï¼‰ã€‚è‡ªJava SE 8 å‘å¸ƒå¼€å§‹ï¼Œ<em>é‡å¤æ³¨è§£</em> æ‰æ”¯æŒè¯¥ç‰¹æ€§ã€‚</p>
<p>æ¯”å¦‚æ­£åœ¨ç¼–å†™è¦ç”¨åˆ°å®šæ—¶å™¨æœåŠ¡ï¼Œæ¥å®ç°åœ¨ç»™å®šæ—¶é—´æˆ–ä»¥æŸä¸ªç‰¹å®šæ—¶é—´è¡¨ï¼Œå»è¿è¡ŒæŸä¸ªæ–¹æ³•ï¼Œç±»ä¼¼äº UNIX çš„ <code>cron</code> æœåŠ¡çš„ä»£ç ã€‚é‚£ä¹ˆå°±è¦è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¥åœ¨ä¸€ä¸ªæœˆçš„æœ€åä¸€å¤©ï¼ŒåŠæ¯ä¸ªå‘¨äº”æ™šä¸Š11ç‚¹è¿è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œ<code>doPeriodicCleanup</code>ã€‚é‚£ä¹ˆå°±è¦è®¾ç½®å®šæ—¶å™¨è¿è¡Œï¼Œåˆ›å»ºä¸€ä¸ª <code>@Schedule</code> æ³¨è§£ï¼Œå¹¶å°†å…¶ä¸¤æ¬¡åº”ç”¨åˆ° <code>doPeriodicCleanup</code> æ–¹æ³•ã€‚ç¬¬ä¸€æ¬¡çš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªæœˆçš„æœ€åä¸€å¤©ï¼ŒåŒæ—¶ç¬¬äºŒæ¬¡æŒ‡å®šå‘¨äº”æ™šä¸Š11ç‚¹ï¼Œå°±è·Ÿä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸€æ ·ï¼š</p>
<pre><code class="language-java">@Schedule(dayOfMoth=&quot;last&quot;)
@Schedule(dayOfWeek=&quot;Fri&quot;, hours=&quot;23&quot;)
public void doPeriodicCleanup() {...}
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªç¤ºä¾‹ï¼Œæ˜¯å°†æ³¨è§£åº”ç”¨åˆ°æ–¹æ³•ã€‚å¯åœ¨ä»»ä½•ä¼šç”¨åˆ°æ ‡å¿—æ³¨è§£çš„åœ°æ–¹ï¼Œå¯¹æŸä¸ªæ³¨è§£åŠ ä»¥é‡å¤ã€‚æ¯”å¦‚ï¼Œæœ‰ç€ä¸€ä¸ªå¤„ç†æœªæˆæƒè®¿é—®å¼‚å¸¸çš„ç±»ã€‚å°±å¯ä»¥å¯¹è¿™ä¸ªç±»æ³¨è§£ä¸Šä¸€ä¸ªé’ˆå¯¹é‚£äº›ç®¡ç†è€…çš„ <code>@Alert</code> çš„æ³¨è§£ï¼Œå’Œä¸€ä¸ªé’ˆå¯¹ç³»ç»Ÿç®¡ç†å‘˜çš„ <code>@Alert</code>ï¼š</p>
<pre><code class="language-java">@Alert(role=&quot;Manager&quot;)
@Alert(role=&quot;Administrator&quot;)
public class UnauthorizedAccessException extends SecurityException {...}
</code></pre>
<p>ç”±äºå…¼å®¹æ€§çš„åŸå› ï¼Œé‡å¤æ³¨è§£æ˜¯è¢«ä¿å­˜åœ¨ç”±Javaç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ <em>å®¹å™¨æ³¨è§£ï¼ˆcontainer annotationï¼‰</em> ä¸­çš„ã€‚ä¸ºäº†è®©ç¼–è¯‘å™¨å®Œæˆæ­¤æ“ä½œï¼Œå°±è¦æ±‚åœ¨ä»£ç ä¸­åŒ…å«ä¸‹é¢è¿™ä¸¤ä¸ªå£°æ˜ã€‚</p>
<h4 id="æ­¥éª¤ä¸€å£°æ˜ä¸€ä¸ª-repeatable-ç±»å‹çš„æ³¨è§£ç±»å‹"><a class="header" href="#æ­¥éª¤ä¸€å£°æ˜ä¸€ä¸ª-repeatable-ç±»å‹çš„æ³¨è§£ç±»å‹">æ­¥éª¤ä¸€ã€å£°æ˜ä¸€ä¸ª <code>Repeatable</code> ç±»å‹çš„æ³¨è§£ç±»å‹</a></h4>
<p><strong>Step 1: Declare a <code>Repeatable</code> Annotation Type</strong></p>
<p>è¯¥æ³¨è§£ç±»å‹å¿…é¡»è¢« <code>@Repeatable</code> å…ƒæ³¨è§£ï¼ˆthe <code>@Repeatable</code> meta-annotationï¼‰æ ‡è®°ã€‚ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå®šåˆ¶çš„ <code>@Schedule</code> å¯é‡å¤æ³¨è§£ç±»å‹ï¼š</p>
<pre><code class="language-java">import java.lang.annotation.Repeatable;

@Repeatable(Schedules.class)
public @interface Schedule {
    String dayOfMonth() default &quot;first&quot;;
    String dayOfWeek() default &quot;Mon&quot;;
    int hour() default 12;
}
</code></pre>
<p>é‚£ä¸ª <code>@Repeatable</code> å…ƒæ³¨è§£çš„å–å€¼ï¼Œå³åœ¨æ‹¬å·é‡Œçš„é‚£ä¸ªï¼Œå³ä¸ºJavaç¼–è¯‘å™¨ç”Ÿæˆçš„ã€ç”¨äºå­˜å‚¨é‡å¤æ€§æ³¨è§£çš„å®¹å™¨æ³¨è§£çš„ç±»å‹ï¼ˆThe value of the <code>@Repeatable</code> meta-annotation, in parentheses, is the type of the container annotation that the Java compiler generates to store repeating annotationsï¼‰ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œé‚£ä¸ªå®¹çº³æ³¨è§£ç±»å‹ï¼Œå³æ˜¯ <code>Schedules</code>ï¼Œé‚£ä¹ˆé‡å¤æ€§çš„ <code>@Schedule</code> æ³¨è§£ï¼Œå°±æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ª <code>@Schedules</code> çš„æ³¨è§£ä¸­çš„ã€‚</p>
<p>åœ¨æ²¡æœ‰é¦–å…ˆå°†æŸä¸ªæ³¨è§£å£°æ˜æœªå¯é‡å¤æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œå°†åŒä¸€æ³¨è§£åº”ç”¨åˆ°æŸä¸ªå£°æ˜ï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ã€‚</p>
<h4 id="æ­¥éª¤äºŒå£°æ˜å‡ºé‚£ä¸ªå®¹çº³æ³¨è§£ç±»å‹"><a class="header" href="#æ­¥éª¤äºŒå£°æ˜å‡ºé‚£ä¸ªå®¹çº³æ³¨è§£ç±»å‹">æ­¥éª¤äºŒã€å£°æ˜å‡ºé‚£ä¸ªå®¹çº³æ³¨è§£ç±»å‹</a></h4>
<p><strong>Step 2: Declare the Containing Annotation Type</strong></p>
<p>å®¹çº³æ€§æ³¨è§£ç±»å‹ï¼Œå¿…é¡»æœ‰ç€ä¸€ä¸ªæ•°ç»„ç±»å‹çš„ <code>value</code> å…ƒç´ ã€‚è¯¥æ•°ç»„ç±»å‹çš„ç»„ä»¶ç±»å‹ï¼Œåˆ™å¿…é¡»æ—¶é‚£ä¸ªå¯é‡å¤æ³¨è§£ç±»å‹ã€‚è¿™ä¸ª <code>@Schedules</code> å®¹çº³æ€§ç±»å‹çš„å£°æ˜ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="language-java">public @interface Schedules {
    Schedule[] value();
}
</code></pre>
<h3 id="æ³¨è§£çš„è·å–"><a class="header" href="#æ³¨è§£çš„è·å–">æ³¨è§£çš„è·å–</a></h3>
<p><strong>Retrieving Annotations</strong></p>
<p>åå°„å¼APIä¸­ï¼Œæœ‰ç€å¤šä¸ªå¯ç”¨äºè·å–åˆ°æ³¨è§£çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•è¿”å›å•ä¸ªçš„ã€è­¬å¦‚<code>AnnotatedElement.getAnnotation(Class&lt;T&gt;)</code>è¿™æ ·çš„æ³¨è§£çš„è¡¨ç°ï¼Œä¸å­˜åœ¨ <em>ä¸€ä¸ª</em> è¿™äº›æ–¹æ³•æ‰€è¯·æ±‚ç±»å‹æ³¨è§£ï¼Œè€Œä»…è¿”å›è¿”å›å•ä¸ªæ³¨è§£ç›¸æ¯”ï¼Œæ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼ˆThe behavior of the methods that return a single annotation, such as <code>AnnotatedElement.getAnnotation(Class&lt;T&gt;)</code>, are unchanged in that they only return a single annotation if <em>one</em> annotation of the requested type is presentï¼‰ã€‚ä½†è‹¥å­˜åœ¨å¤šä¸ªçš„æ‰€è¯·æ±‚ç±»å‹çš„æ³¨è§£æ—¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥é¦–å…ˆè·å–åˆ°è¿™äº›æ³¨è§£çš„å®¹å™¨ã€‚è¿™æ ·çš„è¯ï¼Œé‚£äº›è€æ—§ä»£ç ä¼šç»§ç»­å·¥ä½œã€‚åœ¨Java SE 8ä¸­å¼•å…¥çš„å…¶ä»–ä¸€äº›æ–¹æ³•ï¼Œåˆ™ä¼šå¯¹å®¹å™¨æ³¨è§£è¿›è¡Œå…¨é¢æ‰«æï¼Œä»è€Œä¸€æ¬¡æ€§è¿”å›å¤šä¸ªæ³¨è§£ï¼Œå°±å¦‚åŒ <code>AnnotatedElement.getAnnotationsByType(Class&lt;T&gt;)</code>é‚£æ ·ã€‚è¯·å‚è€ƒ <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html"><code>AnnotatedElement</code></a> ç±»è§„æ ¼ï¼Œä»¥äº†è§£æœ‰å…³å…¨éƒ¨æ–¹æ³•çš„ä¿¡æ¯ã€‚</p>
<h3 id="è®¾è®¡ä¸Šçš„è€ƒé‡"><a class="header" href="#è®¾è®¡ä¸Šçš„è€ƒé‡">è®¾è®¡ä¸Šçš„è€ƒé‡</a></h3>
<p><strong>Design Considerations</strong></p>
<p>åœ¨è®¾è®¡æŸä¸ªæ³¨è§£ç±»å‹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°é‚£ä¸ªç±»å‹ä¸‹æ³¨é‡Šçš„ <em>åŸºæ•°ï¼ˆcardinalityï¼‰</em>ã€‚ç›®å‰ä¼šç”¨åˆ°è¿™ä¸ªæ³¨è§£ 0 æ¬¡ã€1 æ¬¡éƒ½æ˜¯å¯èƒ½çš„ï¼Œè€Œåœ¨è¿™ä¸ªæ³¨é‡Šè¢«æ ‡è®°ä¸ºäº† <code>@Repeatable</code> æ—¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¤šæ¬¡ä½¿ç”¨äº†ã€‚åŒæ—¶é€šè¿‡ä½¿ç”¨ <code>@Target</code> å…ƒæ³¨è§£ï¼Œè¿˜å¯ä»¥é™åˆ¶æ³¨è§£å¯ç”¨åœ¨ä½•å¤„ã€‚æ¯”å¦‚ï¼Œå³å¯åˆ›å»ºä¸€ä¸ªå¯é‡å¤çš„ã€ä»…å¯ç”¨åœ¨æ–¹æ³•åŠå­—æ®µä¸Šçš„æ³¨è§£ç±»å‹ã€‚ä¸ºç¡®ä¿ <em>ç”¨åˆ°</em> ä½ æ‰€è®¾è®¡æ³¨è§£ç±»å‹æ³¨è§£çš„ç¨‹åºå‘˜ï¼Œå‘ç°ä»–æ˜¯çµæ´»ä¸”å¼ºå¤§çš„ï¼Œé‚£ä¹ˆå°±è¦ä»”ç»†çš„åŠ ä»¥è®¾è®¡ï¼ˆIt is important to design your annotation type carefully to ensure the programmer <em>using</em> the annotation finds it to be as flexible and powerful as posssibleï¼‰ã€‚</p>
<h3 id="æé—®ä¸ç»ƒä¹ æ³¨è§£"><a class="header" href="#æé—®ä¸ç»ƒä¹ æ³¨è§£">æé—®ä¸ç»ƒä¹ ï¼šæ³¨è§£</a></h3>
<h4 id="é—®é¢˜"><a class="header" href="#é—®é¢˜">é—®é¢˜â“</a></h4>
<ol>
<li>
<p>ä¸‹é¢è¿™ä¸ªæ¥å£ä»€ä¹ˆé”™äº†ï¼Ÿ</p>
<pre><code class="language-java">public interface House {
    @Deprecated
    public void open();
    public void openFrontDoor();
    public void openBackDoor();
}
</code></pre>
</li>
<li>
<p>è¯•æƒ³å¯¹é—®é¢˜ 1 ä¸­æ‰€ç»™çš„ <code>House</code> æ¥å£çš„ä¸‹é¢è¿™ä¸ªå®ç°ï¼š</p>
<pre><code class="language-java">public class MyHouse implements House {
    public void open () {}
    public void openFrontDoor () {}
    public void openBackDoor() {}
}
</code></pre>
<p>é‚£ä¹ˆåœ¨ç¼–è¯‘è¿™ä¸ªç¨‹åºæ—¶ï¼Œç”±äºè¿™é‡Œçš„ <code>open</code> æ˜¯å·²è¢«å¼ƒç”¨çš„ï¼ˆåœ¨ä¸Šé¢çš„æ¥å£ä¸­ï¼‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šäº§ç”Ÿä¸€æ¡å‘Šè­¦æ¶ˆæ¯ã€‚è¯¥æ€æ ·æ¥å¤„ç†æ‰é‚£æ¡å‘Šè­¦æ¶ˆæ¯å‘¢ï¼Ÿ</p>
</li>
<li>
<p>ä¸‹é¢çš„ä»£ç åœ¨ç¼–è¯‘æ—¶å°†ä¸ä¼šå‡ºé”™å—ï¼Ÿä¸ºä»€ä¹ˆä¸ä¼šå‡ºé”™ï¼Œæˆ–è€…è¯´ä¸ºä»€ä¹ˆä¼šå‡ºé”™å‘¢ï¼Ÿ</p>
<pre><code class="language-java">public @interface Meal {...}

@Meal(&quot;breakfast&quot;, mainDish=&quot;cereal&quot;)
@Meal(&quot;lunch&quot;, mainDish=&quot;pizza&quot;)
@Meal(&quot;dinner&quot;, mainDish=&quot;salad&quot;)
public void evaluateDiet() {...}
</code></pre>
</li>
</ol>
<h4 id="ç»ƒä¹ "><a class="header" href="#ç»ƒä¹ ">ç»ƒä¹ ğŸ‹ï¸</a></h4>
<ol>
<li>è¯·å®šä¹‰å‡ºä¸€ä¸ªå¸¦æœ‰å…ƒç´  <code>id</code>ã€<code>synopsis</code>ã€<code>engineer</code> åŠ <code>date</code>çš„ã€ç”¨äºä¸€é¡¹å¢å¼ºè¯·æ±‚çš„æ³¨è§£ç±»å‹ã€‚å°†å…¶ä¸­ <code>engineer</code> ä¸ <code>date</code> çš„é»˜è®¤å€¼ï¼Œåˆ†åˆ«æŒ‡å®šä¸º <code>unassigned</code>å’Œ<code>unknown</code>ï¼ˆdefine an annotation type for an enhancement request with elements <code>id</code>, <code>synopsis</code>, <code>engineer</code>, and <code>date</code>. Specify the default value as <code>unassigned</code> for engineer and <code>unknown</code> for dateï¼‰ã€‚</li>
</ol>
<details>
    <summary>ç­”æ¡ˆğŸ™‹</summary>
<h4 id="é—®é¢˜-1"><a class="header" href="#é—®é¢˜-1">é—®é¢˜</a></h4>
<ol>
<li>
<p><strong>ç­”æ¡ˆ</strong>ï¼šæ–‡æ¡£åº”å½“ä½“ç°å‡ºä¸ºä½• <code>open</code> è¢«å¼ƒç”¨ï¼Œä»¥åŠåº”å½“ç”¨ä»€ä¹ˆæ¥ä»£æ›¿ä»–ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="language-java">public interface House {
    /**
     * @deprecated å¯¹ open æ–¹æ³•çš„ä½¿ç”¨æ˜¯ä¸é¼“åŠ±çš„ï¼Œè¯·ä½¿ç”¨
     * openFrontDoor æˆ– openBackDoor äºˆä»¥ä»£æ›¿ã€‚
     *
     */
    @Deprecated
    public void open();
    public void openFrontDoor();
    public void openBackDoor();
}
</code></pre>
</li>
<li>
<p><strong>ç­”æ¡ˆ</strong> ï¼šå¯ç»™ <code>open</code> æ–¹æ³•çš„å®ç°åŠ ä¸Šå¼ƒç”¨æ³¨è§£ï¼ˆyou can deprecate the implementation of <code>open</code>ï¼‰ï¼š</p>
<pre><code class="language-java">public class MyHouse implements House {
    // æ–‡æ¡£æ˜¯ä»æ¥å£ç»§æ‰¿åˆ°çš„ã€‚
    @Deprecated
    public void open() {}
    public void openFrontDoor() {}
    public void openBackDoor() {}
}
</code></pre>
<p>æˆ–è€…ï¼Œå¯æŠ‘åˆ¶å‘Šè­¦ä¿¡æ¯ï¼š</p>
<pre><code class="language-java">public class MyHouse implements House {
    @SuppressWarinings(&quot;deprecation&quot;)
    public void open() {}
    public void openFrontDoor() {}
    public void openBackDoor() {}
}
</code></pre>
</li>
<li>
<p><strong>ç­”æ¡ˆ</strong> ï¼šæ­¤ä»£ç å°†ç¼–è¯‘å¤±è´¥ã€‚åœ¨JDK 8ä¹‹å‰ï¼Œæ˜¯ä¸æ”¯æŒå¯é‡å¤æ³¨è§£çš„ã€‚å³ä¾¿æ˜¯åœ¨ JDK 8 ä¸­ï¼Œç”±äºå…¶ä¸­çš„ <code>Meal</code> æ³¨è§£ç±»å‹ï¼Œæœªè¢«å®šä¹‰ä¸ºå¯é‡å¤ï¼Œå› æ­¤è¯¥ä»£ç ä»ä¼šç¼–è¯‘å¤±è´¥ã€‚å¯é€šè¿‡åŠ ä¸Š <code>@Repeatable</code> å…ƒæ³¨è§£ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªå®¹å™¨æ³¨è§£ç±»å‹ï¼Œæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="language-java">public class AnnotationTest {
    public @interface MealContainer {
        Meal[] value();
    }

    @java.lang.annotation.Repeatable(MealContainer.class)
    public @inerface Meal {
        String value();
        String mainDish();
    }

    @Meal(value=&quot;æ—©é¤&quot;, mainDish=&quot;éº¦ç‰‡&quot;)
    @Meal(value=&quot;åˆé¤&quot;, mainDish=&quot;æŠ«è¨&quot;)
    @Meal(value=&quot;æ™šé¤&quot;, mainDish=&quot;æ²™æ‹‰&quot;)
    public void evaluateDiet() {}
}
</code></pre>
</li>
</ol>
<h4 id="ç»ƒä¹ -1"><a class="header" href="#ç»ƒä¹ -1">ç»ƒä¹ </a></h4>
<ol>
<li>
<p><strong>ç­”æ¡ˆ</strong> : </p>
<pre><code class="language-java">/**
 * è¿™é‡Œçš„æ³¨é‡Šï¼Œå¯¹è¿™ä¸ªå¢å¼ºè¯·æ±‚
 * ï¼ˆthe Request-for-Enhancement, RFEï¼‰æ³¨è§£
 * ç±»å‹ï¼Œè¿›è¡Œäº†æè¿°ã€‚
 */
public @interface RequestForEnhancement {
    int id();
    String synopsis();
    String engineer() default &quot;[unassigned]&quot;;
    String date() default &quot;[unknown]&quot;;
}
</code></pre>
</li>
</ol>
</details>
<h2 id="å¦ä¸€ä¸ªæ³¨è§£æ•™ç¨‹"><a class="header" href="#å¦ä¸€ä¸ªæ³¨è§£æ•™ç¨‹">å¦ä¸€ä¸ªæ³¨è§£æ•™ç¨‹</a></h2>
<blockquote>
<p><em>å¼•ç”¨è‡ª</em>ï¼š<a href="https://www.geeksforgeeks.org/annotations-in-java/">Annotations in Java</a></p>
</blockquote>
<p>æ³¨è§£ç”¨äºæä¾›ç¨‹åºçš„è¡¥å……ä¿¡æ¯ï¼ˆAnnotations are used to provide supplemental information about a programï¼‰ã€‚</p>
<ul>
<li>æ³¨è§£ä»¥ <code>@</code> å¼€å¤´ï¼›</li>
<li>æ³¨è§£ä¸ä¼šæ”¹å˜å·²ç¼–è¯‘å¥½çš„ç¨‹åºçš„è¡Œä¸ºï¼›</li>
<li>æ³¨è§£å¸®åŠ©å°†ä¸€äº› <em>å…ƒæ•°æ®</em>ï¼ˆä¿¡æ¯ï¼‰ä¸å®ä¾‹å˜é‡ã€æ„é€ å™¨ã€æ–¹æ³•ã€ç±»ç­‰çš„ç¨‹åºå…ƒç´ å…³è”èµ·æ¥ï¼ˆAnnotations help to associate <em>metadata</em>(infomation) to the program elements i.e. instance variables, constructors, methods, classes, etc.ï¼‰ï¼›</li>
<li>ç”±äºæ³¨è§£èƒ½å¤Ÿæ”¹å˜ç¼–è¯‘å™¨å¯¹å¾…ç¨‹åºçš„æ–¹å¼ï¼Œå› æ­¤æ³¨è§£å¹¶éçº¯ç²¹çš„æ³¨é‡Šã€‚è¯·å‚é˜…ä¸‹é¢çš„ä»£ç ï¼›</li>
<li>å¤§ä½“ä¸Šæ³¨è§£æ˜¯ç”¨äºæä¾›é¢å¤–ä¿¡æ¯çš„ï¼Œå› æ­¤å¯ä½œä¸º XML ä¸ä¸€äº› Java æ ‡è®°æ€§æ¥å£çš„æ›¿ä»£ã€‚</li>
</ul>
<h3 id="java-ä¸­æ³¨è§£çš„ç»§æ‰¿å±‚æ¬¡"><a class="header" href="#java-ä¸­æ³¨è§£çš„ç»§æ‰¿å±‚æ¬¡">Java ä¸­æ³¨è§£çš„ç»§æ‰¿å±‚æ¬¡</a></h3>
<p><img src="images/Ch20_01.png" alt="Java æ³¨è§£ç»§æ‰¿å±‚æ¬¡" /></p>
<p><em>å›¾ 1 - Java æ³¨è§£ç»§æ‰¿å±‚æ¬¡</em></p>
<p><strong>å®æ“ï¼ˆImplementationï¼‰</strong>ï¼š</p>
<blockquote>
<p><em><strong>æ³¨æ„</strong>ï¼šç”±äºè¿™é‡Œæåˆ°äº†é‡å†™ï¼ˆoverrideï¼‰ï¼Œä½†å¹¶æœªè¿›è¡Œé‡å†™ï¼Œè€Œæ˜¯å¯¹ <code>display</code> æ–¹æ³•è¿›è¡Œäº†è¿‡è½½ï¼ˆoverloadedï¼‰ï¼Œå› æ­¤è¿™é‡Œä¼šæŠ›å‡ºç¼–è¯‘å™¨é”™è¯¯</em>ã€‚</p>
</blockquote>
<pre><code class="language-java">// ç”¨äºæ¼”ç¤ºæ³¨è§£å¹¶éä»…ä»…æ˜¯ä»£ç æ³¨é‡Šçš„ Java ç¨‹åºã€‚

package com.xfoss.Annotations;

// ç¬¬ä¸€ä¸ªç±»
class Base {

    // æ–¹æ³•
    public void display ()
    {
        System.out.println(&quot;ç±» Base çš„ display()&quot;);
    }
}

// ç¬¬äºŒä¸ªç±»
// æ˜¯ä¸»ç±»ï¼ˆMain Classï¼‰
public class Derived extends Base {

    // å¯¹ä¸Šé¢é‚£ä¸ªç±»ä¸­å·²æœ‰çš„æ–¹æ³•è¿›è¡Œé‡å†™
    @Override public void display (int x)
    {
        // åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶è¿è¡Œçš„æ‰“å°è¯­å¥
        System.out.println(&quot;æ´¾ç”Ÿçš„ sisplay()&quot;);
    }

    // ç¬¬äºŒä¸ªæ–¹æ³•
    // è¿™æ˜¯ä¸»é©±åŠ¨ç±»æ–¹æ³•ï¼ˆmain driver methodï¼‰
    public static void main (String args[])
    {
        // åœ¨ main() æ–¹æ³•ä¸­åˆ›å»ºå‡ºè¿™ä¸ªç±»çš„å¯¹è±¡
        Derived obj = new Derived();

        // åœ¨ main() æ–¹æ³•ä¸­è°ƒç”¨ display() æ–¹æ³•
        obj.display();
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>:</p>
<pre><code class="language-console">.../src/main/java/com/xfoss/Annotations/Derived.java:13: error: method does not override or implement a method from a supertype
    @Override public void display(int x)
    ^
    1 error

FAILURE: Build failed with an exception.
</code></pre>
<p>åªéœ€å°†å‚æ•° <code>(int x)</code> ç§»é™¤æˆ–ç§»é™¤ <code>@Override</code>ï¼Œç¨‹åºå°±ä¼šæ­£å¸¸ç¼–è¯‘ã€‚</p>
<h3 id="æ³¨è§£åˆ†ç±»categories-of-annotations"><a class="header" href="#æ³¨è§£åˆ†ç±»categories-of-annotations">æ³¨è§£åˆ†ç±»ï¼ˆCategories of Annotationsï¼‰</a></h3>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼Œç²—ç•¥åœ°åˆ’åˆ†ï¼Œæœ‰ç€ 5 ä¸ªç±»åˆ«çš„æ³¨è§£ï¼š</p>
<ol>
<li>
<p>æ ‡è®°å‹æ³¨è§£ï¼ˆmarker Annotationsï¼‰</p>
</li>
<li>
<p>å•ä¸€å–å€¼å‹æ³¨è§£ï¼ˆsingle value Annotationsï¼‰</p>
</li>
<li>
<p>å®Œæ•´æ³¨è§£ï¼ˆfull Annotationsï¼‰</p>
</li>
<li>
<p>ç±»å‹æ³¨è§£ï¼ˆtype Annotationsï¼‰</p>
</li>
<li>
<p>é‡å¤å‹æ³¨è§£ï¼ˆrepeating Annotationsï¼‰</p>
</li>
</ol>
<p>ä¸‹é¢å°†é€ä¸€è®¨è®ºè¿™äº›ç±»åˆ«çš„æ³¨è§£ï¼Œå¹¶åœ¨éœ€è¦çš„åœ°æ–¹é™„å¸¦ä¸Šç¤ºä¾‹ä»£ç ã€‚</p>
<h3 id="ç±»åˆ«ä¸€æ ‡è®°å‹æ³¨è§£"><a class="header" href="#ç±»åˆ«ä¸€æ ‡è®°å‹æ³¨è§£">ç±»åˆ«ä¸€ï¼šæ ‡è®°å‹æ³¨è§£</a></h3>
<p>å…¶å”¯ä¸€ç›®çš„å°±æ˜¯å¯¹æŸä¸ªå£°æ˜è¿›è¡Œæ ‡è®°ã€‚è¿™ç±»æ³¨è§£ä¸åŒ…å«æˆå‘˜ï¼Œè¿›è€Œä¹Ÿæ²¡æœ‰ä»»ä½•æ•°æ®ã€‚å› æ­¤ï¼Œä»–ä»¬ä½œä¸ºæ³¨è§£è€Œå­˜åœ¨å°±è¶³å¤Ÿäº†ï¼ˆThus, its presence as an annotation is sufficientï¼‰ã€‚ç”±äºè¿™ç±»æ ‡è®°å‹æ¥å£ä¸åŒ…å«æˆå‘˜ï¼Œé‚£ä¹ˆä»…ä»…ç¡®å®šå®ƒæ˜¯å­˜åœ¨è¿˜æ˜¯ä¸å­˜åœ¨å°±å·²è¶³å¤Ÿã€‚</p>
<p><code>@Override</code> å°±æ˜¯æ ‡è®°å‹æ³¨è§£çš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">@TestAnnotation()
</code></pre>
<h3 id="ç±»åˆ«äºŒå•ä¸€å–å€¼å‹æ³¨è§£"><a class="header" href="#ç±»åˆ«äºŒå•ä¸€å–å€¼å‹æ³¨è§£">ç±»åˆ«äºŒï¼šå•ä¸€å–å€¼å‹æ³¨è§£</a></h3>
<p>è¿™ç±»æ³¨è§£ä»…åŒ…å«ä¸€ä¸ªæˆå‘˜ï¼Œè¿›è€Œå…è®¸ç®€å†™å½¢å¼çš„å¯¹è¯¥æˆå‘˜å–å€¼çš„æŒ‡å®šï¼ˆThese annotations contain only one member and allow a shorthand form of specifying the value of the memberï¼‰ã€‚åœ¨åº”ç”¨åˆ°æ­¤ç±»å‹æ³¨è§£æ—¶ï¼Œå°±åªéœ€æŒ‡å®šé‚£ä¸ªæˆå‘˜çš„å€¼ï¼Œè€Œæ— éœ€æŒ‡å®šè¯¥æˆå‘˜çš„åç§°ã€‚ç„¶è€Œï¼Œä¸ºäº†ç”¨ä¸Šè¿™ç§ç®€å†™ï¼Œå…¶æˆå‘˜çš„åç§°å¿…é¡»æ˜¯ <code>value</code>ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">@TestAnnotation(&quot;testing&quot;)
</code></pre>
<h3 id="ç±»åˆ«ä¸‰-å®Œæ•´æ³¨è§£"><a class="header" href="#ç±»åˆ«ä¸‰-å®Œæ•´æ³¨è§£">ç±»åˆ«ä¸‰ï¼š å®Œæ•´æ³¨è§£</a></h3>
<p>è¿™ç±»æ³¨è§£åŒ…å«äº†å¤šä¸ªæ•°æ®æˆå‘˜ã€åç§°ã€å–å€¼ã€æˆå‘˜å–å€¼å¯¹ï¼ˆThese annotations consist of multiple data members, names, values, pairsï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">@TestAnnotation(owner=&quot;Rahul&quot;, value=&quot;Class Geeks&quot;)
</code></pre>
<h3 id="ç±»åˆ«å››ç±»å‹æ³¨è§£"><a class="header" href="#ç±»åˆ«å››ç±»å‹æ³¨è§£">ç±»åˆ«å››ï¼šç±»å‹æ³¨è§£</a></h3>
<p>è¿™ç±»æ³¨è§£å¯åº”ç”¨åˆ°ä»»ä½•ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ï¼ˆThese annotations can be applied to any place where a type is being usedï¼‰ã€‚æ¯”å¦‚ï¼Œå¯å¯¹æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼ç±»å‹è¿›è¡Œæ³¨è§£ã€‚è¿™äº›æ³¨è§£åœ¨å£°æ˜æ—¶ï¼Œå°±å·²è¢« <code>@Target</code> æ³¨è§£è¿‡äº†ï¼ˆThese are declared annotated with <code>@Target</code> annotationï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">package com.xfoss.Annotations;

import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target(ElementType.TYPE_USE)
@interface TypeAnnoDemo {}

public class GFG {
    public static void main (String args[])
    {
        @TypeAnnoDemo String string = &quot;æˆ‘å·²è¢«æŸä¸ªç±»å‹æ³¨è§£ç»™æ³¨è§£è¿‡äº†&quot;;
        System.out.println(string);
        abc();
    }

    static @TypeAnnoDemo int abc ()
    {
        System.out.println(&quot;æ­¤å‡½æ•°çš„è¿”å›å€¼ç±»å‹å·²è¢«æ³¨è§£è¿‡äº†&quot;);
        return 0;
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">æˆ‘å·²è¢«æŸä¸ªç±»å‹æ³¨è§£ç»™æ³¨è§£è¿‡äº†
æ­¤å‡½æ•°çš„è¿”å›å€¼ç±»å‹å·²è¢«æ³¨è§£è¿‡äº†
</code></pre>
<h3 id="ç±»åˆ«äº”é‡å¤æ€§æ³¨è§£"><a class="header" href="#ç±»åˆ«äº”é‡å¤æ€§æ³¨è§£">ç±»åˆ«äº”ï¼šé‡å¤æ€§æ³¨è§£</a></h3>
<p>è¿™ç±»æ³¨è§£å¯å¤šæ¬¡åº”ç”¨åˆ°å•ä¸ªé¡¹ç›®ï¼ˆthese are the annotations that can be applied to a single item more than oneceï¼‰ã€‚æ³¨è§£è¦èƒ½å¤Ÿå¯é‡å¤ï¼Œå…¶æ‰€å±ç±»å‹å°±å¿…é¡»è¢« <code>@Repeatable</code>æ³¨è§£ç»™æ³¨è§£è¿‡ï¼Œè€Œ<code>@Repeatable</code>åˆ™æ˜¯åœ¨ <code>java.lang.annotation</code>åŒ…ä¸­å®šä¹‰çš„å…ƒæ³¨è§£ã€‚<code>@Repeatable</code>å¯¹æŸä¸ªæ³¨è§£ç±»å‹è¿›è¡Œæ³¨è§£æ—¶ï¼Œä»–çš„<code>value</code>å­—æ®µæŒ‡å®šäº†è¢«æ³¨è§£çš„å¯é‡å¤æ³¨è§£ç±»å‹çš„ <strong>å®¹å™¨ç±»å‹ï¼ˆcontainer typeï¼‰</strong>ã€‚è€Œ <strong>å®¹å™¨çš„æŒ‡å®šï¼Œæ˜¯æŒ‡<code>value</code>å­—æ®µæ˜¯è¯¥å¯é‡å¤æ³¨è§£ç±»å‹çš„æ•°ç»„çš„ä¸€ä¸ªæ³¨è§£ï¼ˆthe container is specified as annotation whose <code>value</code> field is an array of the repeatable annotation typeï¼‰</strong>ã€‚å› æ­¤ï¼Œè¦åˆ›å»ºå¯é‡å¤æ³¨è§£ï¼Œé¦–å…ˆå°±è¦åˆ›å»ºå®¹å™¨æ³¨è§£ï¼Œè¿›è€Œå°†åˆ›å»ºå‡ºçš„å®¹å™¨æ³¨è§£ç±»å‹ï¼Œä½œä¸ºå‚æ•°æŒ‡å®šç»™é‚£ä¸ª <code>@Repeatable</code> æ³¨è§£ï¼ˆä¹Ÿå°±æ˜¯è¯´å…ƒæ³¨è§£<code>@Repeatable</code> æ˜¯æœ‰å‚æ•°çš„ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">package com.xfoss.Annotations;

import java.lang.annotation.*;
import java.lang.reflect.Method;

@Retention(RetentionPolicy.RUNTIME)
@Repeatable(MyRepeatedAnnos.class)
@interface Word
{
    String word() default &quot;Hello&quot;;
    int value() default 0;
}

@Retention(RetentionPolicy.RUNTIME)
@interface MyRepeatedAnnos
{
    Word[] value();
}

public class Main {

    // æ³¨æ„ï¼šè¿™é‡Œåˆå§‹åŒ– @Word ç±»å‹çš„æ³¨è§£æ—¶ï¼š
    //      1. ä¸èƒ½ä½¿ç”¨éé™æ€å®ä¾‹å˜é‡ã€‚è¿™ä¸ªæ³¨è§£çš„åˆå§‹åŒ–ï¼Œæ˜¯å±äºå…¶
    // æ‰€æ³¨è§£çš„é™æ€æ–¹æ³• newMethod() çš„ä¸Šä¸‹æ–‡çš„ï¼›
    //      2. ä¹Ÿä¸èƒ½ä½¿ç”¨é™æ€å®ä¾‹å˜é‡ã€‚â€œelement value must be a 
    // constant expressionâ€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨é™æ€ final çš„å¸¸é‡ã€‚
    @Word(word = &quot;First&quot;, value = 1)
    @Word(word = &quot;Second&quot;, value = 2)
    public static void newMethod()
    {
        Main obj = new Main();

        try {
            Class&lt;?&gt; c = obj.getClass();

            Method m = c.getMethod(&quot;newMethod&quot;);

            Annotation anno = m.getAnnotation(MyRepeatedAnnos.class);
            System.out.println(anno);
        }
        catch (NoSuchMethodException e) 
        {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) { newMethod(); }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">@com.xfoss.Annotations.MyRepeatedAnnos(value={@com.xfoss.Annotations.Word(word=&quot;First&quot;, value=1), @com.xfoss.Annotations.Word(word=&quot;Second&quot;, value=2)})
</code></pre>
<h3 id="é¢„å®šä¹‰æ ‡å‡†æ³¨è§£"><a class="header" href="#é¢„å®šä¹‰æ ‡å‡†æ³¨è§£">é¢„å®šä¹‰/æ ‡å‡†æ³¨è§£</a></h3>
<p><strong>Predefined/Standard Annotations</strong></p>
<p>å¦‚åŒåœ¨ä¸Šé¢çš„ç»§æ‰¿å±‚æ¬¡å›¾ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼ŒJava æ™®éå®šä¹‰äº† 7 ä¸ªå†…å»ºæ³¨è§£ã€‚</p>
<ul>
<li>å…¶ä¸­å››ä¸ªæ˜¯ä» <code>java.lang.annotation</code> åŒ…å¯¼å…¥çš„ï¼š<code>@Rentention</code>ã€<code>@Documented</code>ã€<code>@Target</code> ä¸ <code>@Inherited</code>ï¼›</li>
<li>å¦å¤–ä¸‰ä¸ªåŒ…å«åœ¨ <code>java.lang</code> åŒ…ä¸­ï¼š<code>@Deprecated</code>ã€<code>@Override</code> å’Œ <code>@SuppressWarnings</code>ã€‚</li>
</ul>
<p><strong>æ³¨è§£ä¸€ï¼š<code>@Deprecated</code></strong></p>
<ul>
<li>è¿™æ˜¯ä¸ªæ ‡è®°å‹æ³¨è§£ã€‚ä»–è¡¨æ˜æŸä¸ªå£°æ˜å·²ä½œåºŸï¼Œè€Œå·²è¢«æ›´æ–°çš„å½¢å¼æ‰€å–ä»£ï¼›</li>
<li>åœ¨æŸä¸ªå…ƒç´ å·²è¢«å¯ç”¨æ—¶ï¼Œé‚£ä¹ˆè¿˜åº”åŒæ—¶ä½¿ç”¨ <code>Javadoc</code> çš„ [<code>@deprecated</code> æ ‡ç­¾](http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html#javadoc_tag]ï¼›</li>
<li><code>@deprecated</code> æ ‡ç­¾ç”¨äºæ–‡æ¡£ï¼Œè€Œ<code>@Deprecated</code> æ³¨è§£åˆ™æ˜¯ç”¨äºè¿è¡Œæ—¶åå°„ï¼ˆruntime reflectionï¼‰ï¼›</li>
<li>åœ¨åŒæ—¶ä½¿ç”¨åˆ° <code>@deprecated</code> æ ‡ç­¾å’Œ <code>@Deprecated</code> æ³¨è§£æ—¶ï¼Œå‰è€…æœ‰ç€æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">package com.xfoss.Annotations;

public class DeprecatedTest {
    @Deprecated
    public void Display()
    {
        System.out.println(&quot;Deprecatedtest display()&quot;);
    }

    public static void main(String args[])
    {
        DeprecatedTest d1 = new DeprecatedTest();
        d1.Display();
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">Deprecatedtest display()
</code></pre>
<blockquote>
<p><strong>æ³¨</strong>ï¼šè¯¥ç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šæŠ¥å‡ºä»¥ä¸‹é”™è¯¯ï¼š</p>
</blockquote>
<pre><code class="language-console">æ³¨: .../src/main/java/com/xfoss/Annotations/AnnotationTestDrive.javaä½¿ç”¨æˆ–è¦†ç›–äº†å·²è¿‡æ—¶çš„ APIã€‚
</code></pre>
<p><strong>æ³¨è§£äºŒï¼š<code>@Override</code></strong></p>
<p>è¿™æ˜¯ä¸ªåªèƒ½ç”¨åœ¨æ–¹æ³•ä¸Šçš„æ ‡è®°å‹æ³¨è§£ã€‚è¢« <code>@Override</code> æ³¨è§£è¿‡çš„æ–¹æ³•ï¼Œå¿…é¡»å¯¹æ¥è‡ªè¶…ç±»çš„æŸä¸ªæ–¹æ³•è¿›è¡Œé‡å†™ã€‚è‹¥è¢«æ³¨è§£çš„æ–¹æ³•æ²¡æœ‰è¿™æ ·åšï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚ä½¿ç”¨è¿™ä¸ªæ³¨è§£æ¥ç¡®ä¿æŸä¸ªè¶…ç±»æ–¹æ³•çœŸçš„è¢«é‡å†™äº†ï¼Œè€Œéç®€å•åœ°è¢«è¿‡è½½ï¼ˆoverloadedï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">package com.xfoss.Annotations;

class BaseCls
{
    public void Display()
    {
        System.out.println(&quot;BaseCls diplay()&quot;);
    }

    public static void main(String args[])
    {
        BaseCls t1 = new DerivedCls();
        t1.Display();
    }
}

class DerivedCls extends BaseCls 
{
    @Override
    public void Display()
    {
        System.out.println(&quot;DerivedCls display()&quot;);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">DerivedCls display()
</code></pre>
<p><strong>æ³¨è§£ä¸‰ï¼š<code>@SuppressWarnings</code></strong></p>
<p>ä½¿ç”¨ <code>@SuppressWarnings</code> æ³¨è§£æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå¯¹ç‰¹å®šç¼–è¯‘å™¨å‘Šè­¦åŠ ä»¥æŠ‘åˆ¶ã€‚é€šè¿‡å­—ç¬¦ä¸²å½¢å¼çš„å‘Šè­¦åç§°ï¼Œæ¥æŒ‡å®šè¦æŠ‘åˆ¶çš„å‘Šè­¦ã€‚è¿™ç§ç±»å‹çš„æ³¨è§£ï¼Œå¯åº”ç”¨åˆ°å…¨éƒ¨ç±»å‹çš„å£°æ˜ã€‚</p>
<p>Java å°†å‘Šè­¦åˆ†ç»„æˆä¸¤ä¸ªç±»åˆ«ã€‚åˆ†åˆ«æ˜¯ <code>deprecated</code> ä¸ <code>unchecked</code>ã€‚åœ¨è€æ—§ä»£ç ç¢°åˆ°ä½¿ç”¨äº†æ³›å‹çš„ä»£ç æ—¶ï¼Œå°±ä¼šç”Ÿæˆ<code>unchecked</code>çš„å‘Šè­¦ï¼ˆAny <code>unchecked</code> warning is generated when a legacy code interfaces with a code that uses genericsï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹</strong></p>
<pre><code class="language-java">// ç”¨äºæ¼”ç¤º SuppressWarnings æ³¨è§£çš„ Java ç¨‹åº
package com.xfoss.Annotations;

// ç±» 1
class DeprecatedTest
{
    @Deprecated
    public void Display()
    {
        System.out.println(&quot;Deprecated display()&quot;);
    }
}

// ç±» 2
public class SuppressWarningTest
{
    // è‹¥å°†ä¸‹é¢çš„æ³¨è§£æ³¨é‡Šæ‰ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šäº§ç”Ÿå‘Šè­¦
    @SuppressWarnings({&quot;checked&quot;, &quot;deprecation&quot;})
    public static void main(String args[])
    {
        DeprecatedTest d1 = new DeprecatedTest();
        d1.Display();
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">Deprecated display()
</code></pre>
<p><strong>æ³¨è§£ 4ï¼š<code>@Documented</code></strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå‘Šè¯‰å·¥å…·æŸä¸ªæ³¨è§£å°†è¦è¢«ç¼–å†™æ–‡æ¡£çš„æ ‡è®°å‹æ¥å£ã€‚æ³¨è§£ä¸ä¼šè¢«åŒ…å«è¿› <code>Javadoc</code> çš„æ³¨é‡Šä¸­ï¼ˆit is a marker interface that tells a tool that an annotation is to be documented. Annotations are not included in <code>Javadoc</code> commentsï¼‰ã€‚<code>@Documented</code> æ³¨è§£åœ¨ä»£ç ä¸­çš„ä½¿ç”¨ï¼Œä¼šå¼€å¯è¯¸å¦‚ <code>Javadoc</code> è¿™æ ·çš„å·¥å…·å¯¹å…¶çš„å¤„ç†ï¼Œå¹¶å°†æ³¨è§£ç±»å‹ä¿¡æ¯ï¼ŒåŒ…å«è¿›ç”Ÿæˆçš„æ–‡æ¡£ä¸­ã€‚</p>
<p><strong>æ³¨è§£ 5ï¼š<code>@Target</code></strong></p>
<p>è¿™ä¸ªæ³¨è§£è®¾è®¡åªè¢«ç”¨ä½œç»™å¦ä¸€æ³¨è§£å½“æ³¨è§£ï¼ˆå…ƒæ³¨è§£ï¼Œ<em>meta annotation</em>ï¼‰ã€‚<code>@Target</code> ä¼šå–ä¸€ä¸ªå‚æ•°ï¼Œè€Œè¯¥å‚æ•°å¿…é¡»æ˜¯æ¥è‡ª<code>ElementType</code>æšä¸¾ç±»å‹ï¼ˆ<code>java.lang.annotation.ElementType</code>ï¼‰çš„å¸¸é‡ã€‚è¯¥å‚æ•°æŒ‡å®šäº†è¢« <code>@Target</code>æ³¨è§£çš„æ³¨è§£ï¼Œå¯åº”ç”¨åˆ°é‚£äº›ç±»å‹çš„å£°æ˜ä¸Šã€‚ä¸‹é¢ç»™å‡ºäº†<code>ElementType</code>æšä¸¾ç±»å‹æ‰€åŒ…å«çš„å¸¸é‡ï¼Œä»¥åŠä»–ä»¬å„è‡ªæ‰€å¯¹è±¡çš„å£°æ˜ç±»å‹ã€‚</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><code>@Target</code> å¸¸é‡</th><th style="text-align: left">å¯åº”ç”¨åˆ°çš„æ³¨è§£</th></tr></thead><tbody>
<tr><td style="text-align: left"><code>ANNOTATION_TYPE</code></td><td style="text-align: left">å¦ä¸€æ³¨è§£</td></tr>
<tr><td style="text-align: left"><code>CONSTRUCTOR</code></td><td style="text-align: left">æ„é€ å™¨</td></tr>
<tr><td style="text-align: left"><code>FIELD</code></td><td style="text-align: left">å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰</td></tr>
<tr><td style="text-align: left"><code>LOCAL_VARIABLE</code></td><td style="text-align: left">æœ¬åœ°å˜é‡</td></tr>
<tr><td style="text-align: left"><code>METHOD</code></td><td style="text-align: left">æ–¹æ³•</td></tr>
<tr><td style="text-align: left"><code>PACKAGE</code></td><td style="text-align: left">åŒ…</td></tr>
<tr><td style="text-align: left"><code>PARAMETER</code></td><td style="text-align: left">æ–¹æ³•çš„å‚æ•°</td></tr>
<tr><td style="text-align: left"><code>TYPE</code></td><td style="text-align: left">ç±»ã€æ¥å£æˆ–æšä¸¾ï¼ˆClass, Interface, or enumerationï¼‰</td></tr>
</tbody></table>
</div>
<p><em>è¡¨ä¸€, <code>ElementType</code> æšä¸¾ç±»å‹ä¸‹çš„å„ä¸ªå¸¸é‡</em></p>
<p>å¯åœ¨ <code>@Target</code> æ³¨è§£ä¸­æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªçš„è¿™äº›å€¼ã€‚åœ¨æŒ‡å®šå¤šä¸ªå€¼æ—¶ï¼Œå°±å¿…é¡»å°†è¿™äº›å€¼æŒ‡å®šåœ¨ä¸€ä¸ªå¤§æ‹¬å·åˆ†éš”çš„æ¸…å•ä¸­ï¼ˆTo specify multiple values, we must specify them within a braces-delimited listï¼‰ã€‚æ¯”å¦‚ï¼Œå¯ä½¿ç”¨è¿™ä¸ª <code>@Target</code> æ³¨è§£ï¼š<code>@Target({ElementType.FIELD, ElementType.LOCAL_VARIABLE})</code> æ¥æŒ‡å®šæŸä¸ªæ³¨è§£åªåº”ç”¨åˆ°å­—æ®µåŠæœ¬åœ°å˜é‡ã€‚</p>
<p><strong><code>@Rentention</code> æ³¨è§£</strong></p>
<p>è¿™ä¸ªæ³¨è§£ç¡®å®šäº†å…¶æ‰€æ³¨è§£çš„æ³¨è§£ï¼Œåº”ä¿ç•™åœ¨ä½•å¤„åŠä¿ç•™å¤šé•¿æ—¶é—´ï¼ˆit determines where and how long the annotation is retentï¼‰ã€‚<code>@Rentention</code> æ³¨è§£å¯ä»¥æœ‰ä¸‰ä¸ªå–å€¼ï¼š</p>
<ul>
<li><strong><code>SOURCE</code></strong>: æ³¨è§£å°†ä¿ç•™åœ¨æºä»£ç çº§åˆ«ï¼Œå¹¶è¢«ç¼–è¯‘å™¨æ‰€å¿½ç•¥ï¼›</li>
<li><strong><code>CLASS</code></strong>ï¼šæ³¨è§£å°†ä¿ç•™åœ¨ç¼–è¯‘æ—¶ï¼Œå¹¶è¢« JVM æ‰€å¿½ç•¥ï¼›</li>
<li><strong><code>RUNTIME</code></strong>ï¼šè¿™äº›æ³¨è§£å°†ä¿ç•™åœ¨è¿è¡Œæ—¶ã€‚</li>
</ul>
<p><strong>æ³¨è§£ 7ï¼šç”¨æˆ·å®šä¹‰ï¼ˆå®šåˆ¶ï¼‰æ³¨è§£</strong></p>
<p>ç”¨æˆ·å®šä¹‰æ³¨è§£å¯ç”¨äºå¯¹ç¨‹åºå…ƒç´ ï¼Œæ¯”å¦‚å˜é‡ã€æ„é€ å™¨ã€æ–¹æ³•ç­‰è¿›è¡Œæ³¨è§£ã€‚è¿™äº›æ³¨è§£å¯åº”ç”¨åœ¨ç´§æ¥ç€å…ƒç´ å£°æ˜ï¼ˆæ„é€ å™¨ã€æ–¹æ³•ã€ç±»ç­‰ç­‰ï¼‰å¼€å§‹çš„åœ°æ–¹ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼šå£°æ˜</p>
<pre><code class="language-java">[Access Specifier] @interface&lt;AnnotationName&gt;
{
    DataType &lt;Method Name&gt;() [default value];
}
</code></pre>
<p>åœ¨å®ç°ç”¨æˆ·å®šä¹‰æ³¨è§£ä¹‹å‰ï¼Œè¯·å°†ä»¥ä¸‹å„ä¸ªè¦ç‚¹ï¼Œä½œä¸ºå®šåˆ¶æ³¨è§£çš„é‡è¦åŸåˆ™ï¼ˆDo keep these certain points as rules for custom annotations before implementing user-defined annotationsï¼‰ã€‚</p>
<ol>
<li><code>AnnotationName</code> æ˜¯ä¸ªæ¥å£ï¼›</li>
<li>è¯¥å‚æ•°ä¸åº”ä¸é‚£äº›æ–¹æ³•å£°æ˜ç›¸å…³è”ï¼Œä¸”åœ¨æ–¹æ³•å£°æ˜ä¸Šä¸åº”ä½¿ç”¨ <code>throws</code> å­è¯­å¥ï¼ˆthe parameter should not be associated with method declarations and <code>throws</code> clause should not be used with method declarationï¼‰ï¼›</li>
<li>å…¶ä¸­çš„å‚æ•°ï¼Œå°†ä¸ä¼š<code>null</code> å€¼ï¼Œä½†å¯ä»¥æœ‰é»˜è®¤å€¼ï¼›</li>
<li><code>default</code> å€¼æ˜¯å¯é€‰çš„ï¼›</li>
<li>å…¶ä¸­çš„æ–¹æ³•è¿”å›å€¼ç±»å‹ï¼Œåº”æ˜¯åŸç”Ÿå€¼ã€æšä¸¾ã€å­—ç¬¦ä¸²ã€ç±»åç§°ï¼Œæˆ–è€…åŸç”Ÿå€¼ã€æšä¸¾ã€å­—ç¬¦ä¸²æˆ–ç±»åç§°ç­‰ç±»å‹çš„æ•°ç»„ï¼ˆthe return type of method should be either primitive, enum, string, class name, or array of primitive, enum, string, or class name typeï¼‰ã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="language-java">package com.xfoss.Annotations;

import java.lang.annotation.*;

@Documented
@Retention(RetentionPolicy.RUNTIME)
@interface TestAnnotation
{
    String Developer() default &quot;Lenny&quot;;
    String Expirydate();
}

public class Test
{
    @TestAnnotation(Developer=&quot;Echo&quot;, Expirydate=&quot;01-10-2020&quot;)
    void fun1()
    {
        System.out.println(&quot;æµ‹è¯•æ–¹æ³• 1&quot;);
    }

    @TestAnnotation(Developer=&quot;Anil&quot;, Expirydate=&quot;01-10-2020&quot;)
    void fun2()
    {
        System.out.println(&quot;æµ‹è¯•æ–¹æ³• 2&quot;);
    }

    public static void main(String args[])
    {
        System.out.println(&quot;ä½ å¥½&quot;);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">ä½ å¥½
</code></pre>
<h2 id="æ‹‰å§†è¾¾-lambda-è¡¨è¾¾å¼"><a class="header" href="#æ‹‰å§†è¾¾-lambda-è¡¨è¾¾å¼"><a id="lambda-expressions"></a>æ‹‰å§†è¾¾ Lambda è¡¨è¾¾å¼</a></h2>
<p><strong>Java 8 ä¸­çš„ Lambda è¡¨è¾¾å¼ï¼ˆLambda Expressions in Java 8ï¼‰</strong></p>
<p>æ‹‰å§†è¾¾è¡¨è¾¾å¼æœ¬è´¨ä¸Šæ˜¯ <a href="#functional_interface">åŠŸèƒ½æ¥å£(functioal interface)</a> ï¼ˆå¸¦æœ‰å•ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œè¢«ç§°ä¸ºåŠŸèƒ½æ¥å£ã€‚<code>java.lang.Runnable</code> å³æ˜¯åŠŸèƒ½æ¥å£çš„ä¸€ä¸ªç¤ºä¾‹ï¼‰çš„è¡¨å¾ã€‚æ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°çš„æ˜¯å”¯ä¸€æŠ½è±¡æ–¹æ³•ï¼Œè¿›è€Œå› æ­¤å®ç°çš„æ˜¯åŠŸèƒ½æ¥å£ã€‚æ‹‰å§†è¾¾è¡¨è¾¾å¼æ˜¯åœ¨ Java 8 ä¸­åŠ å…¥çš„ç‰¹æ€§ï¼Œä»è€Œæä¾›äº†ä»¥ä¸‹çš„è¿™äº›åŠŸèƒ½ã€‚</p>
<ul>
<li>å®ç°äº†å°†åŠŸèƒ½ä½œä¸ºæ–¹æ³•å‚æ•°çš„å¤„ç†ï¼Œæˆ–è€…è¯´å°†ä»£ç å½“ä½œæ•°æ®çš„å¤„ç†ï¼ˆenable to treat functionality as a method argument, or code as dataï¼‰ï¼›</li>
<li>å¯åˆ›å»ºå‡ºä¸å±äºä»»ä½•ç±»çš„å‡½æ•°ï¼ˆa function can be created without belonging to any classï¼‰ï¼›</li>
<li>æ‹‰å§†è¾¾è¡¨è¾¾å¼ï¼Œå¯åƒå¯¹è±¡ä¸€æ ·ä¼ é€’ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¢«æ‰§è¡Œï¼ˆa lambda expression can be passed around as if it was an object and executed on demandï¼‰ã€‚</li>
</ul>
<pre><code class="language-java">package com.xfoss.LambdaExpr;

interface FuncInterface
{
    void abstractFun(int x);

    default void normalFun()
    {
        System.out.println(&quot;ä½ å¥½&quot;);
    }
}

class Test
{
    public static void main(String args[])
    {
        FuncInterface fobj = (int x) -&gt; System.out.println(2*x);

        fobj.abstractFun(5);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-java">10
</code></pre>
<p><img src="images/Ch20_02.png" alt="æ‹‰å§†è¾¾è¡¨è¾¾å¼" /></p>
<p><em>å›¾ 2 - æ‹‰å§†è¾¾è¡¨è¾¾å¼</em></p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="language-java">lambda operator -&gt; body
</code></pre>
<p>å…¶ä¸­æ‹‰å§†è¾¾è¿ç®—ç¬¦ï¼ˆ<code>lambda operator</code>ï¼‰å¯ä»¥æ˜¯ï¼š</p>
<ul>
<li><strong>é›¶å‚æ•°</strong>ï¼š</li>
</ul>
<pre><code class="language-java">() -&gt; System.out.println(&quot;é›¶å‚æ•°çš„æ‹‰å§†è¾¾ï¼ˆZero parameter lambdaï¼‰&quot;)ï¼›
</code></pre>
<ul>
<li><strong>ä¸€ä¸ªå‚æ•°</strong>ï¼š</li>
</ul>
<pre><code class="language-java">(p) -&gt; System.out.format(&quot;ä¸€ä¸ªå‚æ•°ï¼š%s&quot;, p);
</code></pre>
<p>åœ¨é‚£ä¸ªå˜é‡çš„ç±»å‹å¯ä»ä¸Šä¸‹æ–‡æ¨å¯¼å‡ºæ¥æ—¶ï¼Œé‚£ä¹ˆå°æ‹¬å·çš„ä½¿ç”¨å°±ä¸æ˜¯å¼ºåˆ¶çš„ï¼ˆit is not mandatory to use parentheses, if the type of that variable can be inferred from the contextï¼‰ã€‚</p>
<ul>
<li><strong>å¤šä¸ªå‚æ•°</strong>ï¼š</li>
</ul>
<pre><code class="language-java">(p1, p2) -&gt; System.out.format(&quot;å¤šä¸ªå‚æ•°ï¼š%s, %s&quot;, p1, p2);
</code></pre>
<p>è¯·æ³¨æ„ï¼šæ‹‰å§†è¾¾è¡¨è¾¾å¼æ°å¦‚å‡½æ•°ï¼Œä»–ä»¬è·Ÿå‡½æ•°ä¸€æ ·æ¥å—å‚æ•°ï¼ˆlambda expressions are just like functions and they accept parameters just like functionsï¼‰ã€‚</p>
<pre><code class="language-java">package com.xfoss.LambdaExpr;

import java.util.ArrayList;

class TestDrive
{
    public static void main(String args[]){

        ArrayList&lt;Integer&gt; arrL = new ArrayList&lt;Integer&gt;();
        for(int i = 1; i &lt; 5; i++) arrL.add(i);

        arrL.forEach(n -&gt; System.out.println(n));

        arrL.forEach(n -&gt; {if(n%2 == 0) System.out.println(n);});
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">1
2
3
4
2
4
</code></pre>
<p>è¯·æ³¨æ„æ‹‰å§†è¾¾è¡¨è¾¾å¼ <em><strong>åªå¯ç”¨äºå®ç°åŠŸèƒ½æ¥å£</strong></em>ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­åŒæ ·æ˜¯è¿™æ ·çš„ï¼Œå…¶ä¸­çš„æ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°çš„æ˜¯ <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html">æ¶ˆè´¹è€…</a> åŠŸèƒ½æ¥å£ï¼ˆConsumer Functional Interfaceï¼‰ã€‚</p>
<pre><code class="language-java">// ç”¨äºå¯¹æ‹‰å§†è¾¾è¡¨è¾¾å¼å·¥ä½œåŸç†è¿›è¡Œæ¼”ç¤ºçš„ Java ç¨‹åº
package com.xfoss.LambdaExpr;

public class LambdaExprDemo
{
    // å‡½æ•° operation æ˜¯ä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°çš„
    interface FuncInter1
    {
        int operation(int a, int b);
    }

    // è¿™é‡Œçš„ sayMessage() ä¹Ÿæ˜¯ä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°çš„
    interface FuncInter2
    {
        void sayMessage(String message);
    }

    // ç”±è¿™ä¸ªå…·ä½“çš„ operate æ–¹æ³•æ¥å®Œæˆ FuncInter1 ä¸­
    // åœ¨ â€˜aâ€™ ä¸ â€˜bâ€™ ä¸Šçš„è¿ç®—
    private int operate(int a, int b, FuncInter1 fobj)
    {
        return fobj.operation(a, b);
    }

    public static void main(String args[])
    {
        // ç”¨äºä¸¤ä¸ªå‚æ•°ç›¸åŠ çš„æ‹‰å§†è¾¾è¡¨è¾¾å¼
        // x ä¸ y çš„æ•°æ®ç±»å‹æ˜¯éå¿…é¡»çš„ã€‚
        // è¯¥è¡¨è¾¾å¼å®ç°äº† 'FuncInter1' æ¥å£
        FuncInter1 add = (int x, int y) -&gt; x + y;

        // ç”¨äºä¸¤ä¸ªå‚æ•°ç›¸ä¹˜çš„æ‹‰å§†è¾¾è¡¨è¾¾å¼
        // è¿™ä¸ªè¡¨è¾¾å¼åŒæ ·å®ç°äº† 'FuncInter1' æ¥å£
        FuncInter1 multiply = (int x, int y) -&gt; x * y;

        // åˆ›å»ºä¸€ä¸ª LambdaExprDemo çš„å®åŠ›ï¼Œæ¥ä»¥ operate çš„
        // ä¸åŒæ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°ï¼Œå¯¹å…¶è¿›è¡Œè°ƒç”¨
        LambdaExprDemo dobj = new LambdaExprDemo();

        // ä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼ï¼Œå°†ä¸¤ä¸ªæ•°ç›¸åŠ 
        System.out.format(&quot;åŠ æ³•ä¸º %d\n&quot;, dobj.operate(6, 3, add));

        // ä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼ï¼Œå°†ä¸¤ä¸ªæ•°ç›¸ä¹˜
        System.out.format(&quot;ä¹˜æ³•ä¸º %d\n&quot;, dobj.operate(6, 3, multiply));

        // å•ä¸ªå‚æ•°çš„æ‹‰å§†è¾¾è¡¨è¾¾å¼
        // æ­¤è¡¨è¾¾å¼å®ç°äº† 'FuncInter2' æ¥å£
        FuncInter2 fobj = message -&gt; System.out.format(&quot;ä½ å¥½ %s\n&quot;, message);

        fobj.sayMessage(&quot;æå®¢&quot;);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">åŠ æ³•ä¸º 9
ä¹˜æ³•ä¸º 18
ä½ å¥½ æå®¢
</code></pre>
<h3 id="è¦ç‚¹"><a class="header" href="#è¦ç‚¹">è¦ç‚¹ï¼š</a></h3>
<ul>
<li>æ‹‰å§†è¾¾è¡¨è¾¾å¼çš„å‡½æ•°ä½“ï¼Œå¯ä»¥åŒ…å«é›¶ä¸ªã€ä¸€ä¸ªæˆ–æ›´å¤šçš„è¯­å¥ï¼ˆthe body of a lambda expression can contain zero, one or more statementsï¼‰ï¼›</li>
<li>åœ¨åªæœ‰å•ä¸ªè¯­å¥æ—¶ï¼ŒèŠ±æ‹¬å·ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼ŒåŒæ—¶è¯¥åŒ¿åå‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸å‡½æ•°ä½“è¡¨è¾¾å¼ä¸€è‡´ï¼ˆwhen there is a single statement curly brackets are not mandatory and the return type of the anonymous function is the same as that of the body expressionï¼‰ï¼›</li>
<li>åœ¨æœ‰å¤šä¸ªè¯­å¥æ—¶ï¼Œé‚£ä¹ˆè¿™äº›è¯­å¥å°±å¿…é¡»ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ï¼ˆå½¢æˆä¸€ä¸ªä»£ç å—ï¼‰ï¼Œä¸”è¯¥åŒ¿åå‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œä¸ç”±æ­¤ä»£ç å—æ‰€è¿”å›çš„å€¼ç±»å‹ä¸€è‡´ï¼Œæˆ–è€…å³ä¸ºåœ¨æœªè¿”å›ä»»ä½•ä¸œè¥¿æ—¶çš„ <code>void</code>ï¼ˆwhen there are more than one statements, then these must be enclosed in curly brackets(a code block) and the return type of the anonymous function is the same as the type of the value return within the code block, or <code>void</code> if nothing is returnedï¼‰ã€‚</li>
</ul>
<h2 id="åŠŸèƒ½æ¥å£"><a class="header" href="#åŠŸèƒ½æ¥å£"><a id="functional_interface"></a>åŠŸèƒ½æ¥å£</a></h2>
<p>Java æ°¸è¿œæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼ˆJava has forever remained an Object-Oriented Programming languageï¼‰ã€‚è€Œç”±äºJava æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å£°ç§°ï¼Œé™¤äº†ä¸€äº›åŸç”Ÿæ•°æ®ç±»å‹ï¼Œå’Œä¸€äº›ä¸ºå®Œæ•´æ€§ä¸ç®€å•æ€§ç›®çš„è€Œé‡‡ç”¨çš„åŸç”Ÿæ–¹æ³•å¤–ï¼Œ Java ç¼–ç¨‹è¯­è¨€ä¸­æ‰€å‡ºç°å…¨éƒ¨äº‹ç‰©ï¼Œéƒ½å¯ä»¥ç”±å¯¹è±¡æ¥è¡¨è¾¾ï¼ˆby object-oriented programming language, we can declare that everything present in the Java programming language rotates throughout the Objects, except for some of the primitive data types and primitive methods for integrity and simplicityï¼‰ã€‚åœ¨ç§°ä¸º Java çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•å•ç‹¬å‡½æ•°çš„ã€‚Java ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°ï¼Œéƒ½æ˜¯æŸä¸ªç±»çš„ç»„æˆéƒ¨åˆ†ï¼Œè€Œè‹¥æŸäººæƒ³è¦è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¿…é¡»ä½¿ç”¨åˆ°ç±»æˆ–ç±»çš„å¯¹è±¡ï¼Œæ¥è°ƒç”¨è¿™äº›å‡½æ•°ã€‚</p>
<p><strong>åŠŸèƒ½æ¥å£</strong>æ˜¯ä¹‹åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚ä»–ä»¬å¯åªæœ‰ä¸€é¡¹ç”¨äºå±•ç¤ºçš„åŠŸèƒ½ã€‚è‡ªJava 8 å¼€å§‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ <a href="#lambda-expressions">æ‹‰å§†è¾¾è¡¨è¾¾å¼</a> æ¥è¡¨ç¤ºåŠŸèƒ½æ¥å£çš„å®ä¾‹äº†ã€‚åŠŸèƒ½æ¥å£å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„é»˜è®¤æ–¹æ³•ï¼ˆa functional interface can have any number of default methodsï¼‰ã€‚<em><strong><code>Runnable</code>ã€<code>ActionListener</code>ã€<code>Comparable</code></strong></em> ç­‰éƒ½æ˜¯åŠŸèƒ½æ¥å£çš„ä¸€äº›ç¤ºä¾‹ã€‚</p>
<p>åŠŸèƒ½æ¥å£åˆè¢«ç§°ä¸º <strong>å•ä¸€æŠ½è±¡æ–¹æ³•æ¥å£ï¼ˆSingle Abstract Method Interfaceï¼‰</strong>ã€‚ç®€ç§° <strong>SAM æ¥å£</strong>ã€‚Java ä¸­çš„åŠŸèƒ½æ¥å£ï¼Œå±äºæä¾›åˆ°ç”¨æˆ·åŸºç¡€ç¼–ç¨‹æ‰‹æ®µçš„æ–°ç‰¹æ€§ï¼ˆfunctional interfaces in Java are the new feature that provides users with the approach of fundamental programmingï¼‰ã€‚</p>
<p>è‡ªJava SE 8 å¼€å§‹ï¼Œä¸æ‹‰å§†è¾¾è¡¨è¾¾å¼åŠæ–¹æ³•å¼•ç”¨ä¸€èµ·ï¼ŒåŠ å…¥çš„åŠŸèƒ½æ¥å£ï¼Œä¸ºçš„æ˜¯ä»¤åˆ°ä»£ç æ›´å…·å¯è¯»æ€§ã€æ›´ä¸ºå¹²å‡€å’Œç›´è§‚ï¼ˆfunctional interfaces are included in Java SE 8 with Lambda expressions and Method references in order to make code more readable, clean, and straightforwardï¼‰ã€‚åŠŸèƒ½æ¥å£æ˜¯é‚£äº›ç¡®ä¿ç²¾ç¡®åœ°åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚é€šè¿‡ä»¥ <strong>åä¸º <em><code>@FunctionalInterface</code></em></strong> åŠ ä»¥æ³¨è§£çš„æ¥å£è¡¨ç¤ºæ–¹å¼ï¼Œæ¥è¿ç”¨å’Œæ‰§è¡ŒåŠŸèƒ½æ¥å£ï¼ˆfunctional interfaces are used and executed by representing the interface with an <strong>annotation called <em><code>@FunctionalInterface</code></em></strong>ï¼‰ã€‚å¦‚åŒå…ˆå‰æ‰€è®²çš„é‚£æ ·ï¼ŒåŠŸèƒ½æ¥å£å¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚ä¸è¿‡åŠŸèƒ½æ¥å£å´å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„é»˜è®¤ä¸é™æ€æ–¹æ³•ã€‚</p>
<p>åœ¨åŠŸèƒ½æ¥å£ä¸­ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æ¥å£å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ï¼Œåªä¼šæ˜¯<code>abstract</code> æ–¹æ³•ï¼Œå› æ­¤ä½¿ç”¨å…³é”®å­— <code>abstract</code> å°±æ˜¯ï¼Œå³æ— éœ€ä½¿ç”¨å…³é”®å­— <code>abstract</code>ã€‚åŒæ ·ä¹Ÿå¯ä»¥å°†æ‹‰å§†è¾¾è¡¨è¾¾å¼ï¼Œç§°ä¸ºåŠŸèƒ½æ¥å£çš„å®ä¾‹ã€‚</p>
<p>åœ¨ Java 8 ä¹‹å‰ï¼Œå°±å¿…é¡»åˆ›å»ºå‡ºåŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œæˆ–è€…å¿…é¡»è¦å®ç°è¿™äº›æ¥å£ã€‚</p>
<pre><code class="language-java">// ç”¨äºæ¼”ç¤ºåŠŸèƒ½æ¥å£çš„ Java ç¨‹åº
package com.xfoss.FunctionalInterface;

class Test {
    public static void main(String args[]) {
        // åˆ›å»ºåŒ¿åå†…éƒ¨ç±»å¯¹è±¡
        new Thread(new Runnable() {
            @Override public void run()
            {
                System.out.println(&quot;æ–°çš„çº¿ç¨‹å·²åˆ›å»º&quot;);
            }
        }).start();
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">æ–°çš„çº¿ç¨‹å·²åˆ›å»º
</code></pre>
<p>è‡ª Java 8 å¼€å§‹ï¼Œå°±å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œå°† <a href="#lambda-expressions">æ‹‰å§†è¾¾è¡¨è¾¾å¼</a> èµ‹å€¼ç»™å…¶åŠŸèƒ½æ¥å£å¯¹è±¡ï¼š</p>
<pre><code class="language-java">// ç”¨äºæ¼”ç¤ºä½¿ç”¨äº†æ‹‰å§†è¾¾è¡¨è¾¾å¼çš„åŠŸèƒ½æ¥å£å®ç°çš„ Java ç¨‹åº
package com.xfoss.FunctionalInterface;

class Test {
    public static void main(String args[]) {
        // åˆ›å»ºå¯¹è±¡çš„æ‹‰å§†è¾¾è¡¨è¾¾å¼
        new Thread( () -&gt; {
                System.out.println(&quot;æ–°çš„çº¿ç¨‹å·²åˆ›å»º&quot;);
        }).start();
    }
}
</code></pre>
<pre><code class="language-console">æ–°çš„çº¿ç¨‹å·²åˆ›å»º
</code></pre>
<h3 id="å…³äº-functionalinterface-æ³¨è§£"><a class="header" href="#å…³äº-functionalinterface-æ³¨è§£">å…³äº <code>@FunctionalInterface</code> æ³¨è§£</a></h3>
<p><code>@FunctionalInterface</code> æ³¨è§£ç”¨äºç¡®ä¿åŠŸèƒ½æ¥å£ä¸å¯ä»¥æœ‰å¤šäºä¸€ä¸ªçš„æŠ½è±¡æ–¹æ³•ã€‚è‹¥å‡ºç°äº†å¤šäºä¸€ä¸ªçš„æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæ ‡ç¤ºå‡ºä¸€ä¸ª <code>Unexcepted @FunctionalInterface annotation</code> æ¶ˆæ¯ã€‚ä¸è¿‡å¹¶éå¼ºåˆ¶è¦æ±‚ä½¿ç”¨æ­¤æ³¨è§£ã€‚</p>
<pre><code class="language-java">package com.xfoss.FunctionalInterface;

@FunctionalInterface
interface Square {
    int calculate(int x);
}

class TestDrive {
    public static void main(String args[])
    {
        int a = 5;

        Square s = (int x) -&gt; x * x;

        int ans = s.calculate(a);
        System.out.println(ans);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">25
</code></pre>
<h3 id="ä¸€äº›å†…å»ºçš„-java-åŠŸèƒ½æ¥å£"><a class="header" href="#ä¸€äº›å†…å»ºçš„-java-åŠŸèƒ½æ¥å£">ä¸€äº›å†…å»ºçš„ Java åŠŸèƒ½æ¥å£</a></h3>
<p>è‡ªJava SE 1.8 å¼€å§‹ï¼Œå°±æœ‰äº†è®¸å¤šçš„è½¬æ¢æˆäº†åŠŸèƒ½æ¥å£çš„æ¥å£ã€‚è¿™å…¨éƒ¨æ¥å£éƒ½æ˜¯ä»¥ <code>@FunctionalInterface</code> æ³¨è§£è¿‡çš„ã€‚è¿™äº›æ¥å£å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li><code>Runnable</code> -&gt; æ­¤æ¥å£åªåŒ…å«äº† <code>run()</code> æ–¹æ³•ï¼›</li>
<li><code>Comparable</code> -&gt; æ­¤æ¥å£åªä¿æŠ¤äº† <code>compareTo()</code> æ–¹æ³•ï¼›</li>
<li><code>ActionListener</code> -&gt; æ­¤æ¥å£åªåŒ…å«äº† <code>actionPerformed()</code> æ–¹æ³•ï¼›</li>
<li><code>Callable</code> -&gt; æ­¤æ¥å£åªåŒ…å«äº† <code>call()</code> æ–¹æ³•ã€‚</li>
</ul>
<p><strong>Java SE 8 åŒ…å«äº†å››å¤§ç±»åŠŸèƒ½æ¥å£</strong>ï¼Œå¯åˆ†åˆ«åº”ç”¨äºå¤šç§æƒ…å½¢ã€‚</p>
<p>è¿™å››ä¸ªå¤§ç±»åˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰;</li>
<li>åˆ¤æ–­ï¼ˆPredicateï¼‰;</li>
<li>å‡½æ•°ï¼ˆFunctionï¼‰;</li>
<li>æä¾›è€…ï¼ˆSupplierï¼‰ã€‚</li>
</ol>
<p>åœ¨ä¸Šè¿°å››ä¸ªæ¥å£ä¸­é—´ï¼Œå‰ä¸‰ä¸ªï¼Œä¹Ÿå°±æ˜¯<code>Consumer</code>ã€<code>Predicate</code>ï¼Œä¸ <code>Function</code> ï¼Œè¿˜æœ‰ç€ä»¥ä¸‹å»¶ä¼¸è¡¥å……ï¼š</p>
<ol>
<li><code>Consumer</code> -&gt; <code>Bi-Consumer</code>ï¼›</li>
<li><code>Predicate</code> -&gt; <code>Bi-Predicate</code>ï¼›</li>
<li><code>Function</code> -&gt; <code>Bi-Function</code>ã€ä¸€å…ƒç®—å­/è¿ç®—ç¬¦ã€äºŒå…ƒç®—å­/è¿ç®—ç¬¦ç­‰ï¼ˆ<code>Bi-Function</code>, Unary Operator, Binary Operatorï¼‰ã€‚</li>
</ol>
<p>ä¸‹é¢å¯¹è¿™å››ä¸ªåŠŸèƒ½æ¥å£ä¸€ä¸€è¯´æ˜ã€‚</p>
<ol>
<li>
<p><strong><code>Consumer</code> æ¶ˆè´¹è€…</strong></p>
<p>åŠŸèƒ½æ¥å£ä¸­çš„æ¶ˆè´¹è€…æ¥å£ï¼Œæ˜¯ä¸€ç±»åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæˆ–è€…è¯´åªæ¥å—ä¸€ä¸ªæå‡å‚æ•°ï¼ˆthe consumer interface of the functional interface is the one that accepts only one argument or a gentrified argumentï¼‰ã€‚æ¶ˆè´¹è€…æ¥å£æ²¡æœ‰è¿”å›å€¼ã€‚ä»–ä»€ä¹ˆä¹Ÿä¸ä¼šè¿”å›ã€‚<code>Consumer</code>è¿˜æœ‰ä¸€äº›åŠŸèƒ½å˜ç§ -- <code>DoubleConsumer</code>ã€<code>IntConsumer</code>ï¼Œä»¥åŠ <code>LongConsumer</code>ã€‚è¿™äº›å˜ç§æ¥å—åŸç”Ÿå€¼ä½œä¸ºå‚æ•°ã€‚</p>
<p>é™¤äº†è¿™äº›å˜ç§å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§è¢«ç§°ä¸º<code>Bi-Consumer</code>çš„<code>Consumer</code>å˜ç§ã€‚</p>
<ul>
<li><strong><code>Bi-Consumer</code></strong> -- æ˜¯<code>Consumer</code>æ¥å£æœ€ä¸ºä»¤äººç€è¿·çš„å˜ç§ã€‚æ¶ˆè´¹è€…æ¥å£åªä¼šå–ä¸€ä¸ªå‚æ•°ï¼Œç„¶è€Œå¯¹äº <code>Bi-Consumer</code>ï¼Œåˆ™ä¼šå–ä¸¤ä¸ªå‚æ•°ã€‚<code>Consumer</code>ä¸<code>Bi-Consumer</code>äºŒè€…éƒ½æ²¡æœ‰è¿”å›å€¼ã€‚<code>Bi-Consumer</code>ä¸<code>Consumer</code>æ¥å£ä¸€æ ·ï¼Œä¸ä¼šè¿”å›ä»»ä½•ä¸œè¥¿ã€‚åœ¨å¯¹æ˜ å°„æ•°æ®ç»“æ„è¿›è¡Œéå†æ—¶ï¼Œä¼šç”¨åˆ° <code>Bi-Consumer</code> æ¥å£ã€‚</li>
</ul>
<p><strong><code>Consumer</code> åŠŸèƒ½æ¥å£çš„è¯­æ³•/åŸå‹</strong>ï¼š</p>
<pre><code class="language-java">Consumer&lt;Integer&gt; consumer = (value) -&gt; System.out.println(value);
</code></pre>
<p>Java <code>Consumer</code> åŠŸèƒ½æ¥å£çš„è¿™ä¸ªå®ç°ï¼Œä¼šå°†ä½œä¸ºå‚æ•°ä¼ å…¥çš„å€¼ï¼Œæ‰“å°åˆ°é‚£ä¸ªæ‰“å°è¯­å¥ã€‚è¿™ä¸ªå®ç°ä½¿ç”¨äº†Java çš„æ‹‰å§†è¾¾å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>åˆ¤æ–­ï¼ˆ<code>Predicate</code>ï¼‰</strong></p>
<p>åœ¨ç°ä»£ç§‘å­¦çš„é€»è¾‘ä¸‹ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå‚æ•°è€Œç›¸åº”åœ°ç”Ÿæˆä¸€ä¸ªå¸ƒå°”å€¼ä½œä¸ºåº”ç­”çš„å‡½æ•°ï¼Œå°±è¢«æˆä¸ºåˆ¤æ–­ï¼ˆin scientific logic, a function that accepts an argument and, in return, generates a boolean value as an answer is known as a predicateï¼‰ã€‚ä¸æ­¤ç±»ä¼¼ï¼Œåœ¨Java ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒJava çš„åˆ¤æ–­åŠŸèƒ½æ¥å£ï¼Œåˆ™æ˜¯ä¸€ç±»æ¥å—å•ä¸ªå€¼æˆ–å‚æ•°ï¼Œè€Œåœ¨è¿™å•ä¸ªå€¼æˆ–å‚æ•°ä¸Šè¿›è¡ŒæŸç§å¤„ç†ï¼Œè¿›è€Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>True</code>æˆ–<code>False</code>ï¼‰çš„åº”ç­”ã€‚<code>Predicate</code>åŠŸèƒ½æ¥å£çš„å®ç°ï¼Œè¿˜å°è£…äº† Java ä¸­çš„ç­›é€‰è¿‡ç¨‹ï¼ˆç”¨äºåœ¨æŸç§å·²æœ‰æä¾›çš„åˆ¤æ–­åŸºç¡€ä¸Šï¼Œå¯¹æµå¼ç»„ä»¶è¿›è¡Œç­›é€‰çš„è¿‡ç¨‹ï¼Œthe implementation of the <code>Predicate</code> functional interface also encapsualates the logic of filtering(a process that is used to filter stream components on the base of a provided predicate) in Javaï¼‰ã€‚</p>
<p>æ­£å¦‚ <code>Consumer</code> åŠŸèƒ½æ¥å£æ„ä¹‰ï¼Œ<code>Predicate</code> åŠŸèƒ½æ¥å£ä¹Ÿæœ‰ä¸€äº›æ‰©å±•ã€‚ä»–ä»¬åˆ†åˆ«æ˜¯ <code>IntPredicate</code>ã€<code>DoublePredicate</code>ï¼Œä»¥åŠ <code>LongPredicate</code>ã€‚è¿™äº›ç±»å‹çš„åˆ¤æ–­åŠŸèƒ½æ¥å£ï¼Œéƒ½åªæ¥å—ä¸€ä¸ªåŸç”Ÿæ•°æ®ç±»å‹æˆ–åŸç”Ÿå€¼ï¼Œä½œä¸ºå‚æ•°ã€‚</p>
<ul>
<li><strong><code>Bi-Predicate</code></strong> -- <code>Bi-Predicate</code> åŒæ ·æ˜¯ <code>Predicate</code> åŠŸèƒ½æ¥å£çš„ä¸€ä¸ªæ‰©å±•ï¼Œå…¶å–çš„æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œè€Œéä¸€ä¸ªå‚æ•°ï¼Œå®Œæˆä¸€äº›æ•°æ®å¤„ç†ï¼Œè¿›è€Œè¿”å›å¸ƒå°”å€¼ã€‚</li>
</ul>
<p><strong><code>Predicate</code> åŠŸèƒ½æ¥å£çš„è¯­æ³•</strong>ï¼š</p>
<pre><code class="language-java">public interface Predicate&lt;T&gt; {
    boolean test(T t);
}
</code></pre>
<p>åˆ¤æ–­åŠŸèƒ½æ¥å£è¿˜å¯ä»¥ç”¨ç±»æ¥å®ç°ã€‚ä¸‹é¢ç»™å‡ºçš„å°±æ˜¯ç”¨ç±»å®ç°åˆ¤æ–­åŠŸèƒ½æ¥å£çš„è¯­æ³•ï¼š</p>
<pre><code class="language-java">public class CheckForNull implements Predicate {
    
    @Override
    public boolean test(Object o)
    {
        return o != null;
    }
}
</code></pre>
<p>Java åˆ¤æ–­åŠŸèƒ½æ¥å£ï¼Œè¿˜å¯ä»¥ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼å®ç°ã€‚ä¸‹é¢ç»™å‡ºäº†<code>Predicate</code>åŠŸèƒ½æ¥å£å®ç°çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-java">Predicate predicate = (value) -&gt; value != null;
</code></pre>
<p>ç”±äºä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼çš„ Java ä¸­åŠŸèƒ½æ¥å£å®ç°ï¼Œä¸ä½¿ç”¨ç±»çš„å®ç°ï¼Œå®Œæˆçš„éƒ½æ˜¯åŒæ ·å·¥ä½œï¼Œå³è¿”å›äº†ç›¸åŒè¾“å‡ºï¼Œä½†å‰è€…æ›´å…·å¯ç®¡ç†èƒ½åŠ›ï¼Œä¸”æ›´åŠ é«˜æ•ˆã€‚</p>
</li>
<li>
<p><strong><code>Function</code> å‡½æ•°åŠŸèƒ½æ¥å£</strong></p>
<p>å‡½æ•°æ˜¯ Java ä¸­åŠŸèƒ½æ¥å£çš„ä¸€ç§åªæ¥å—å•ä¸ªå‚æ•°ï¼Œå¹¶åœ¨å®Œæˆæ‰€éœ€å¤„ç†ä¹‹åè¿”å›ä¸€ä¸ªå€¼çš„ç±»åˆ«ã€‚ç”±äºåŸç”Ÿç±»å‹æ— æ³•åº”ç”¨æ³›å‹å‚æ•°ï¼Œæ‰€ä»¥<code>Function</code> æ¥å£æœ‰ç€è®¸å¤šç‰ˆæœ¬ï¼Œå¹¶ä¸”æ˜¯éœ€è¦è¿™äº›ç‰ˆæœ¬çš„å‡½æ•°æ¥å£çš„ã€‚åœ¨è¯¸å¦‚åŒç²¾åº¦æ•°ã€æ•´æ•°ã€é•¿æ•´å‹æ•°ç­‰åŸç”Ÿç±»å‹ä¸­ï¼Œä¼—å¤šä¸åŒç‰ˆæœ¬çš„å‡½æ•°æ¥å£ï¼Œå±äºå·¥å…·æ€§çš„æ¥å£ï¼Œå¹¶è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨å‚æ•°ä¸­è¿˜ä¼šç”¨åˆ°è¿™äº›åŸç”Ÿå€¼ç±»å‹çš„ä¸åŒé¡ºåºç»„åˆï¼ˆa function is a type of functional interface in Java that receives only a single argument and returns a value after the required processing. There are many versions of <code>Function</code> interfaces because a primitive type can't imply a general type argument, so we need these versions of function interfaces. Many different versions of the function interfaces are instrumental and are commonly used in primitive types like double, int, long. The different sequences of these primitive types are also used in the argumentï¼‰ã€‚</p>
<p>è¿™è®¸å¤šçš„å‡½æ•°æ¥å£ç‰ˆæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li><strong>Bi-Function</strong> - <code>Bi-Function</code> å¤§è‡´ä¸ <code>Function</code> æœ‰è”ç³»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ<code>Bi-Function</code> æ˜¯å–ä¸¤ä¸ªå‚æ•°çš„ï¼Œè€Œ <code>Function</code> åˆ™æ¥å—ä¸€ä¸ªå‚æ•°ã€‚</li>
</ul>
<p><strong><code>Bi-Function</code> çš„åŸå‹å’Œè¯­æ³•å¦‚ä¸‹</strong>ï¼š</p>
<pre><code class="language-java">    @FunctionalInterface
    public interface BiFunction&lt;T, U, R&gt;
    {
        R apply(T t, U u);
        ......
    }
</code></pre>
<p>åœ¨ä¸Šé¢çš„æ¥å£ä»£ç ä¸­ï¼Œ<code>T, U</code> æ˜¯è¾“å…¥ï¼Œè€Œé‚£é‡Œåªæœ‰ä¸€ä¸ªè¾“å‡ºï¼Œå³ <code>R</code>ã€‚</p>
<ul>
<li><strong>ä¸€å…ƒè¿ç®—ç¬¦å’ŒäºŒå…ƒè¿ç®—ç¬¦ï¼ˆUnary Operator and Binary Operatorï¼‰</strong> - è¿˜æœ‰ä¸¤ä¸ªåˆ«çš„åŠŸèƒ½æ¥å£ï¼Œåˆ†åˆ«å«åšä¸€å…ƒè¿ç®—ç¬¦å’ŒäºŒå…ƒè¿ç®—ç¬¦ã€‚ä»–ä»¬éƒ½å„è‡ªå¯¹ <code>Function</code> ä¸ <code>Bi-Function</code> è¿›è¡Œäº†æ‰©å±•ã€‚ç®€å•åœ°è¯´ï¼Œä¸€å…ƒè¿ç®—ç¬¦æ‰©å±•äº† <code>Function</code>ï¼Œè€ŒäºŒå…ƒè¿ç®—ç¬¦åˆ™æ‰©å±•äº† <code>Bi-Function</code>ã€‚</li>
</ul>
<p><strong>ä¸€å…ƒè¿ç®—ç¬¦å’ŒäºŒå…ƒè¿ç®—ç¬¦çš„åŸå‹å¦‚ä¸‹</strong>ï¼š</p>
<ol>
<li>
<p>ä¸€å…ƒè¿ç®—ç¬¦ï¼ˆUnary Operatorï¼‰</p>
<pre><code class="language-java">@FunctionalInterface
public interface UnaryOperator&lt;T&gt; extends Function&lt;T, U&gt;
{
    ......
}
</code></pre>
</li>
<li>
<p>äºŒå…ƒè¿ç®—ç¬¦ï¼ˆBinary Operatorï¼‰</p>
<pre><code class="language-java">@FunctionalInterface
public interface BinaryOperator&lt;T&gt; extends BiFunction&lt;T, U, R&gt;
{
    ......
}
</code></pre>
</li>
</ol>
<p>ä»ä¸Šé¢çš„ç¤ºä¾‹ï¼Œå°±å¯ä»¥æ˜ç™½ä¸€å…ƒè¿ç®—ç¬¦åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶åªè¿”å›å•ä¸ªå‚æ•°ã€‚è¿˜æœ‰å°±æ˜¯ï¼Œåœ¨ä¸€å…ƒè¿ç®—ç¬¦ä¸­ï¼Œè¾“å…¥ä¸è¾“å‡ºå€¼éƒ½è¦ä¸€è‡´ï¼Œå¹¶ä¸”è¦æ˜¯åŒæ ·çš„ç±»å‹ï¼ˆwe can understand from the above example that the <code>Unary Operator</code> accepts only one argument and returns a single argument only. Still, in <code>Unary Operator</code> both the input and output values must be identical and of the same typeï¼‰ã€‚</p>
<p>è€Œå¦ä¸€è¾¹ï¼ŒäºŒå…ƒè¿ç®—ç¬¦åˆ™ä¸ <code>Bi-Function</code> ç›¸ä»¿ï¼Œè¦å–ä¸¤ä¸ªå€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚ä½†ä¸ä¸€å…ƒè¿ç®—ç¬¦ç±»ä¼¼ï¼Œè¾“å…¥ä¸è¾“å‡ºå€¼å¿…é¡»ä¸€è‡´ä¸”è¦æ˜¯åŒæ ·ç±»å‹ï¼ˆon the other way, <code>Binary Operator</code> takes two values and returns one value comparable to <code>Bi-Function</code> but similar like <code>Unary Operator</code>, the input and out value types must be identical and of the same typeï¼‰ã€‚</p>
</li>
<li>
<p><strong>æä¾›è€…ï¼ˆ<code>Supplier</code>ï¼‰</strong></p>
<p><code>Supplier</code> åŠŸèƒ½æ¥å£ï¼Œä¹Ÿæ˜¯åŠŸèƒ½æ¥å£çš„ä¸€ç§ç±»å‹ï¼Œè¿™ç§ç±»å‹çš„åŠŸèƒ½æ¥å£ï¼Œä¸å–ä»»ä½•çš„è¾“å…¥æˆ–å‚æ•°ï¼Œè€Œä»ä¼šè¿”å›å•ä¸ªè¾“å‡ºã€‚æ­¤ç§ç±»å‹çš„åŠŸèƒ½æ¥å£ï¼Œä¸€èˆ¬ç”¨äºä¸€äº›å€¼çš„å»¶è¿Ÿç”Ÿæˆã€‚æä¾›è€…åŠŸèƒ½æ¥å£ä¹Ÿç”¨äºå¯¹ä»»æ„åºåˆ—ç”Ÿæˆçš„é€»è¾‘ã€‚æ¯”å¦‚ -- <code>æ–æ³¢é‚£å¥‘æ•°åˆ—</code>èƒŒåçš„é€»è¾‘ï¼Œå°±å¯ä»¥å† <code>Stream.generate</code> æ–¹æ³•çš„å¸®åŠ©ä¸‹ç”Ÿæˆï¼Œè€Œ<code>Stream.generate</code>æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡æä¾›è€…åŠŸèƒ½æ¥å£å®ç°çš„ï¼ˆ<code>Supplier</code> functional interface is also a type of functional interface that does not take any input or argument and ye returns a single output. This type of functional interface is generally used in the lazy generation of values. <code>Supplier</code> functional interfaces are also used for defining the logic for the generation of any sequence. For example - The logic behind the Fibonacci Series can be generated with the help of the <code>Stream.generate</code> method, which is implemented by the <code>Supplier</code> functional Interfaceï¼‰ã€‚</p>
<p><code>Supplier</code> åŠŸèƒ½æ¥å£çš„ä¸åŒæ‰©å±•ï¼ŒåŒ…æ‹¬äº†è®¸å¤šå…¶ä»–æä¾›è€…å‡½æ•°ï¼Œæ¯”å¦‚ <code>BooleanSupplier</code>ã€<code>DoubleSupplier</code>ã€<code>LongSupplier</code>åŠ <code>IntSupplier</code> ç­‰ç­‰ã€‚è¿™äº›æ‰€æœ‰è¡ç”Ÿç‰¹å®šç±»å‹çš„è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿéƒ½åªæ˜¯ä»–ä»¬å„è‡ªç›¸åº”çš„åŸç”Ÿå€¼ç±»å‹ï¼ˆthe different extensions of the <code>Supplier</code> functional inteface hold many other supplier functions like <code>BooleanSupplier</code>, <code>DoubleSupplier</code>, <code>LongSupplier</code>, and <code>IntSupplier</code>. The return type of all these further specializations is their corresponding primitives onlyï¼‰ã€‚</p>
<p><strong><code>Supplier</code> åŠŸèƒ½æ¥å£çš„è¯­æ³•/åŸå‹å¦‚ä¸‹</strong>ï¼š</p>
<pre><code class="language-java">@FunctionalInterface
public interface Supplier&lt;T&gt; {

    // è·å–åˆ°ä¸€ä¸ªç»“æœ
    ........

    // è¿”å›è¿™ä¸ªç‰¹å®šç»“æœ
    .........

    T.get();
}
</code></pre>
</li>
</ol>
<pre><code class="language-java">package com.xfoss.FunctionalInterface;

import java.util.*;
import java.util.function.Predicate;

class PredicateDemo {
    public static void main(String args[])
    {

        // åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ¸…å•
        List&lt;String&gt; names = Arrays.asList(
                &quot;Gæå®¢&quot;, &quot;Gæå®¢æµ‹è¯•&quot;, &quot;g1&quot;, &quot;Qé—®ç­”&quot;, &quot;Gæå®¢2&quot;);

        // å°†è¿™ä¸ªåˆ¤æ–­ç±»å‹å£°æ˜ä¸ºå­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä½¿ç”¨æ‹‰å§†è¾¾è¡¨è¾¾å¼
        // åˆ›å»ºå‡ºå¯¹è±¡
        Predicate&lt;String&gt; p = (s) -&gt; s.startsWith(&quot;G&quot;);

        // å¯¹é‚£ä¸ªæ¸…å•è¿›è¡Œè¿­ä»£
        for (String st : names){
            // è°ƒç”¨å¯¹è±¡ä¸Šçš„ test æ–¹æ³•
            if (p.test(st)) System.out.println(st);
        }
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="language-console">Gæå®¢
Gæå®¢æµ‹è¯•
Gæå®¢2
</code></pre>
<h3 id="è¦ç‚¹æ´å¯Ÿimportant-pointsobservations"><a class="header" href="#è¦ç‚¹æ´å¯Ÿimportant-pointsobservations">è¦ç‚¹/æ´å¯Ÿï¼ˆImportant Points/Observationsï¼‰</a></h3>
<p>ä»¥ä¸‹æ˜¯ Java ä¸­åŠŸèƒ½æ¥å£æœ‰å…³çš„ä¸€äº›çªå‡ºç‚¹ï¼š</p>
<ol>
<li>
<p>åœ¨åŠŸèƒ½æ¥å£é‡Œé¢ï¼Œåªæ”¯æŒä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚åœ¨åŠŸèƒ½æ¥å£æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯ <code>@FunctionalInterface</code> æ²¡æœ‰è¢«å®ç°ï¼Œæˆ–æ²¡æœ‰ä»¥å‡½æ•°æ¥å£æ–¹å¼åŠ ä»¥ç¼–å†™å‡ºæ¥æ—¶ï¼Œé‚£åå°±å¯ä»¥åœ¨å…¶ä¸­å£°æ˜å¤šäºä¸€ä¸ªçš„æŠ½è±¡æ–¹æ³•ã€‚ä¸è¿‡åœ¨è¿™ç§æœ‰ç€å¤šäºä¸€ä¸ªçš„åŠŸèƒ½æ¥å£æƒ…å½¢ä¸­ï¼Œé‚£ä¸ªæ¥å£å°±ä¸åœ¨è¢«å«åšåŠŸèƒ½æ¥å£äº†ã€‚é‚£æ˜¯å«åšéåŠŸèƒ½æ¥å£ï¼ˆin functional interfaces, there is only one abstract method supported. If the annotation of a functional interface, i.e., <code>@FunctionalInterface</code> is not implemented or written with a function interface, more than one abstract method can be declared inside it. However, in this situation with more than one functional interface, that interface will not be called a functional interface. It is called a non-functional interfaceï¼‰ï¼›</p>
</li>
<li>
<p>ç”±äº <code>@FunctionalInterface</code> æ³¨è§£åªæ˜¯ä¸ªè‡ªæ„¿ä½¿ç”¨çš„æ³¨è§£ï¼Œå› æ­¤å¹¶ä¸è¦æ±‚ä½¿ç”¨è¿™ä¸ªæ³¨è§£ã€‚ä¹‹æ‰€ä»¥è¦å†™ä¸‹è¿™ä¸ªæ³¨è§£ï¼Œæ˜¯å› ä¸ºå…¶æœ‰åŠ©äºåœ¨ç¼–è¯‘å™¨å±‚é¢çš„æ£€æŸ¥ã€‚é™¤å¼€è¿™ä¸ªç›®çš„ï¼Œè¿™ä¸ªæ³¨è§£å°±æ˜¯å¯é€‰çš„ï¼›</p>
</li>
<li>
<p>å¯å°†æ— é™å¤šçš„æ–¹æ³•ï¼ˆä¸ç®¡æ˜¯é™æ€çš„è¿˜æ˜¯é»˜è®¤çš„ï¼‰ï¼Œæ·»åŠ åˆ°åŠŸèƒ½æ¥å£ã€‚ç›´ç™½åœ°å°†ï¼ŒåŠŸèƒ½æ¥å£å¯¹é™æ€åŠé»˜è®¤æ–¹æ³•çš„åŒ…å«ï¼Œæ²¡æœ‰é™åˆ¶ï¼›</p>
</li>
<li>
<p>å¯¹æ¥è‡ªçˆ¶ç±»æ–¹æ³•çš„é‡å†™ï¼Œä¸ä¼šç ´åJavaä¸­åŠŸèƒ½æ¥å£çš„è§„åˆ™ï¼›</p>
</li>
<li>
<p><code>java.util.function</code> åŒ…ï¼ŒåŒ…å«äº†è®¸å¤š Java 8 ä¸­çš„å†…å»ºåŠŸèƒ½æ¥å£ã€‚</p>
</li>
</ol>
<h2 id="javaä¸­çš„åå°„"><a class="header" href="#javaä¸­çš„åå°„">Javaä¸­çš„åå°„</a></h2>
<p><strong>Reflection in Java</strong></p>
<p><code>Reflection</code> æ˜¯ä¸ªåœ¨è¿è¡Œæ—¶ï¼Œç”¨äºå¯¹æ–¹æ³•ã€ç±»åŠæ¥å£è¿›è¡Œæ£€è§†å’Œä¿®æ”¹çš„ APIã€‚åœ¨ <code>java.lang.reflect</code> åŒ…ä¸‹ï¼Œæä¾›äº†ç”¨äºåå°„çš„é‚£äº›æ‰€éœ€ç±»ï¼Œé‚£ä¹ˆè¦ææ¸…æ¥šåå°„ï¼Œå°±ç¦»ä¸å¼€è¿™ä¸ªåŒ…ã€‚ä¸‹é¢è¿™ä¸ªè§†è§‰æ•™å­¦èµ„æ–™ï¼Œå¯¹è¿™ä¸ªåŒ…è¿›è¡Œäº†æ¼”ç¤ºï¼Œä»¥å¯¹å…¶æœ‰æ›´å¥½çš„æŒæ¡ï¼š</p>
<p><img src="images/Ch20_03.png" alt="java.lang.reflect" /></p>
<p><em>å›¾ 3 - <code>java.lang.reflect</code></em></p>
<ul>
<li>åå°„ç»™åˆ°äº†å¯¹è±¡æ‰€å±ç±»ï¼Œä»¥åŠé€šè¿‡ä½¿ç”¨å¯¹è±¡å¯æ‰§è¡Œå…¶æ‰€å±ç±»çš„å“ªäº›æ–¹æ³•ï¼ˆreflection gives us information about the class to which an object belongs and also the methods of that class that can be executed by using the objectï¼‰ï¼›</li>
<li>ç»ç”±åå°„ï¼Œå°±å¯ä»¥åœ¨è¿è¡Œæ—¶ï¼Œåœ¨ä¸è€ƒè™‘è¦ç”¨åˆ°æ–¹æ³•çš„è®¿é—®æŒ‡å®šç¬¦æƒ…å†µä¸‹ï¼Œå¯¹æ–¹æ³•åŠ ä»¥è°ƒç”¨ï¼ˆthrough reflection, we can invoke methods at runtime irrespective of the access specifier used with themï¼‰ã€‚</li>
</ul>
<p><img src="images/Ch20_04.png" alt="å…³äºåå°„ API" /></p>
<p><em>å›¾ 4 - å…³äºåå°„ API</em></p>
<p>å¯ä½¿ç”¨åå°„æœºåˆ¶ï¼Œæ¥è·å–åˆ°æœ‰å…³ç±»ã€æ„é€ å™¨ï¼ŒåŠæ–¹æ³•çš„æœ‰å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">ç¨‹åºå…ƒç´ </th><th style="text-align: left">æ–¹æ³•</th></tr></thead><tbody>
<tr><td style="text-align: left">ç±»</td><td style="text-align: left">ä½¿ç”¨ <code>getClass()</code> æ–¹æ³•æ¥è·å–åˆ°æŸä¸ªå¯¹è±¡æ‰€å±çš„ç±»åç§°ã€‚</td></tr>
<tr><td style="text-align: left">æ„é€ å™¨</td><td style="text-align: left">ä½¿ç”¨ <code>getConstructors()</code> æ–¹æ³•ï¼Œæ¥è·å–æŸä¸ªå¯¹è±¡æ‰€å±ç±»çš„é‚£äº›å…¬å…±æ„é€ å™¨ã€‚</td></tr>
<tr><td style="text-align: left">æ–¹æ³•</td><td style="text-align: left">ä½¿ç”¨ <code>getMethods()</code> æ–¹æ³•ï¼Œæ¥è·å–åˆ°æŸä¸ªå¯¹è±¡æ‰€å±ç±»çš„é‚£äº›å…¬å…±æ–¹æ³•ã€‚</td></tr>
</tbody></table>
</div>
<p><em>è¡¨ 1 - åå°„æœºåˆ¶å¦‚ä½•è·å–åˆ°å¯¹è±¡æ‰€å±ç±»ã€æ‰€å±ç±»çš„æ„é€ å™¨ä¸æ–¹æ³•</em></p>
<p>åœ¨çŸ¥é“æ–¹æ³•çš„åå­—å’Œä»–çš„é‚£äº›å‚æ•°ç±»å‹æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨åˆ°é‚£ä¸ªæ–¹æ³•ã€‚ä¸ºæ­¤ï¼Œè¦ç”¨åˆ°ä¸‹é¢æ‰€è®²çš„ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li><code>getDeclaredMethod()</code></li>
<li><code>invoke()</code></li>
</ol>
<p><strong>æ–¹å¼ 1</strong>ï¼š<code>getDelcaredMethod()</code>: è¿™ä¼šåˆ›å»ºå‡ºä¸€ä¸ªè¦è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å‡ºæ¥ï¼›</p>
<p><strong>è¯­æ³•</strong>ï¼šæ­¤æ–¹æ³•çš„è¯­æ³•ä¸ºï¼š</p>
<pre><code class="language-java">Class.getDeclaredMethod(name, parameterType)
</code></pre>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ul>
<li>å³å°†åˆ›å»ºå‡ºå¯¹è±¡çš„æ–¹æ³•åå­—ï¼ˆname of a method whose object is to be created)</li>
<li>ä¸€ä¸ªç±»å¯¹è±¡çš„æ•°ç»„ï¼ˆan array of <code>Class</code> objectsï¼‰</li>
</ul>
<p><strong>æ–¹æ³• 2</strong>ï¼š<code>invoke()</code>: åœ¨è¿è¡Œæ—¶ï¼Œç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œä»–å°±ä¼šå¯¹è¿™ä¸ªç±»çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼›</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="language-java">Method.invoke(Object, parameter)
</code></pre>
<blockquote>
<p><em><em>æç¤º</em>ï¼šåœ¨è¯¥ç±»çš„è¿™ä¸ªæ–¹æ³•ä¸æ¥å—ä»»ä½•å‚æ•°æ—¶ï¼Œé‚£ä¹ˆå°±è¦å°† <code>null</code> ä½œä¸ºå‚èµ›åŠ ä»¥ä¼ é€’</em>ã€‚</p>
</blockquote>
<blockquote>
<p><em><em>æ³¨æ„</em>ï¼šç»ç”±åå°„æœºåˆ¶ï¼Œå°±å¯ä»¥åœ¨æŸä¸ªç±»å¯¹è±¡çš„å¸®åŠ©ä¸‹ï¼Œè®¿é—®åˆ°è¿™ä¸ªç±»çš„ç§æœ‰å˜é‡åŠç§æœ‰æ–¹æ³•ï¼Œè¿›è€Œå¯é€šè¿‡ä¸Šé¢è®²åˆ°çš„å¯¹è±¡ï¼Œå¯¹æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚ä¸ºæ­¤å°±è¦ç”¨åˆ°ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•</em>ã€‚</p>
</blockquote>
<p><strong>æ–¹æ³• 3</strong>ï¼š<code>Class.getDeclaredField(FieldName)</code>: ä½¿ç”¨æ­¤æ–¹æ³•æ¥è·å–ç§æœ‰å­—æ®µï¼ˆå˜é‡/æ–¹æ³•ï¼‰ã€‚å°†è¿”å›ä¸€ä¸ªæŒ‡å®šå­—æ®µåç§°çš„ã€ <code>Field</code> ç±»å‹çš„å¯¹è±¡ï¼›</p>
<p><strong>æ–¹æ³• 4</strong>ï¼š<code>Field.setAccessible(true)</code>: å®ç°äº†ä¸è¯¥å­—æ®µè®¿é—®ä¿®é¥°ç¬¦æ— å…³çš„æƒ…å†µä¸‹ï¼Œå¯¹è¯¥å­—æ®µçš„è®¿é—®ï¼ˆAllows to access the field irrespective of the access modifier used with the fieldï¼‰ã€‚</p>
<h3 id="ä»åå°„å¼-api-å¾—åˆ°çš„é‡è¦è®¤çŸ¥"><a class="header" href="#ä»åå°„å¼-api-å¾—åˆ°çš„é‡è¦è®¤çŸ¥">ä»åå°„å¼ API å¾—åˆ°çš„é‡è¦è®¤çŸ¥</a></h3>
<p><strong>Important observations Drawn From Reflection API</strong></p>
<ul>
<li>å®ç° <strong>æ‰©å±•èƒ½åŠ›ç‰¹æ€§ï¼ˆExtensibility Featuresï¼‰</strong>ï¼šåº”ç”¨ç¨‹åºå¯é€šè¿‡è¿ç”¨é‚£äº›å…·å¤‡æ‰©å±•èƒ½åŠ›å¯¹è±¡ä¸­çš„å®ä¾‹å®Œæ•´åç§°ï¼Œæ¥åˆ›å»ºå‡ºè¿™äº›å®ä¾‹æ¥ï¼Œä»è€Œåˆ©ç”¨ä¸Šè¿™äº›å¤–éƒ¨çš„ã€ç”¨æˆ·å®šä¹‰çš„ç±»ï¼ˆan application may make use of external, user-defined classes by creating instances of extensibility objects using their full-qualified namesï¼‰ï¼›</li>
<li>ç”¨äº <strong>è°ƒè¯•åŠæµ‹è¯•å·¥å…·ï¼ˆDebugging and Testing toolsï¼‰</strong>ï¼šç¨‹åºè°ƒè¯•å‘˜ä¼šè¿ç”¨åå°„æœºåˆ¶çš„å±æ€§ï¼Œå¯¹ç±»ç§æœ‰æˆå‘˜è¿›è¡ŒæŸ¥çœ‹ï¼›</li>
<li>å¸¦æ¥ <strong>æ€§èƒ½å¼€é”€ï¼ˆPerformance Overheadï¼‰</strong>ï¼šç›¸æ¯”äºéåå°„çš„åŒç±»ï¼Œåå°„æ“ä½œæœ‰ç€è¾ƒä½æ€§èƒ½ï¼Œå› æ­¤åº”é¿å…åœ¨é‚£äº›æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨ä¸­ã€é¢‘ç¹è°ƒç”¨åˆ°çš„ä»£ç éƒ¨é—¨ï¼Œä½¿ç”¨åå°„æœºåˆ¶ï¼›</li>
<li>å®ç° <strong>å†…éƒ¨æš´éœ²ï¼ˆExposure of Internalsï¼‰</strong>: åå°„å¼ä»£ç ç ´åäº†æŠ½è±¡æœºåˆ¶ï¼Œä»è€Œä¼šæ”¹å˜å¹³å°å‡çº§çš„æ–¹é¢çš„è¡¨ç°ï¼ˆreflective code breaks abstractions and therefore may change behavior with upgrades of the platformï¼‰ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="language-java">// ç”¨äºæ¼”ç¤ºåå°„æœºåˆ¶è¿ç”¨çš„ Java ç¨‹åº
package com.xfoss.Reflection;

// å¯¼å…¥æ‰€éœ€çš„ç±»: Constructorã€Field åŠ Method
import java.lang.reflect.*;

// ç±» 1
// å°†åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡
class Test {
    
    // åˆ›å»ºå‡ºä¸€ä¸ªç§æœ‰å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰
    private String s;

    // è¯¥ç±»çš„æ„é€ å™¨
    //
    // æ–¹æ³• 1
    // å…¬å…±æ„é€ å™¨
    public Test() { s = &quot;æå®¢ç©ºé—´&quot;; }

    // æ–¹æ³• 2
    // ä¸å¸¦å‚æ•°
    public void method1()
    {
        System.out.format(&quot;------------------\nè¯¥å­—ç¬¦ä¸²ä¸º %s\n&quot;, s);
    }

    // æ–¹æ³• 3
    // ä¸€ä¸ªæ•´å½¢å‚èµ›
    public void method2(int n)
    {
        System.out.format(&quot;------------------\nè¯¥æ•°å­—ä¸º %d\n&quot;, n);
    }

    // æ–¹æ³• 4
    // è¿™æ˜¯ä¸ªç§æœ‰æ–¹æ³•
    private void method3()
    {
        System.out.println(&quot;------------------\nç§æœ‰æ–¹æ³•è¢«è°ƒç”¨äº†&quot;);
    }
}

// ç±» 2
// ä¸»ç±»
class Demo {
    
    // ä¸»ç±»çš„é©±åŠ¨å™¨æ–¹æ³•
    public static void main(String args[]) throws Exception
    {

        // åˆ›å»ºå‡ºå°†å¯¹å…¶å±æ€§è¿›è¡ŒæŸ¥çœ‹çš„å¯¹è±¡

        // åœ¨ main() æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªç±» 1 çš„å¯¹è±¡
        Test obj = new Test();

        // ä½¿ç”¨ getClass() æ–¹æ³•ï¼Œä»è¿™ä¸ªå¯¹è±¡åˆ›å»º
        // å‡ºç±»å¯¹è±¡ï¼ˆclass objectï¼‰
        Class cls = obj.getClass();

        // ä½¿ç”¨ getName() æ–¹æ³•ï¼Œæ‰“å°å‡ºç±»çš„åå­—
        System.out.format(&quot;---------------------\nç±»çš„åå­—ä¸º %s\n---------------------\n&quot;,
                cls.getName());

        // é€šè¿‡è¯¥ç±»å¯¹è±¡ï¼Œè·å–åˆ°å…¶æ„é€ å™¨
        Constructor constructor = cls.getConstructor();

        // ä½¿ç”¨ getName() æ–¹æ³•ï¼Œæ‰“å°å‡ºæ„é€ å™¨çš„åå­—
        System.out.format(&quot;æ„é€ å™¨çš„åå­—ä¸º %s\n---------------------\n&quot;,
                constructor.getName());

        // è¿™ä¸ªè¯­å¥åªæ˜¯æ˜¾ç¤ºæ¶ˆæ¯
        System.out.println(&quot;ç±»çš„å…¬å…±æ–¹æ³•åˆ†åˆ«ä¸ºï¼š&quot;);

        // é€šè¿‡åœ¨è¯¥ç±»å¯¹è±¡ä¸Šä½¿ç”¨ getDeclaredMethods() æ–¹æ³•è·å–åˆ°
        // è¯¥ç±»çš„é‚£äº›å£°æ˜çš„æ–¹æ³•ï¼ˆgetMethods() å°†è·å–åˆ°å…¨éƒ¨æ–¹æ³•ï¼‰
        Method[] methods = cls.getDeclaredMethods();

        // æ‰“å°å‡ºè¿™äº›æ–¹æ³•çš„åå­—
        for (Method method : methods) System.out.println(method.getName());

        // ç»ç”±æä¾›åˆ°æ–¹æ³•åå­—åŠå‚æ•°ç±»ï¼Œä½œä¸º getDeclaredMethod() 
        // æ–¹æ³•çš„å‚æ•°ï¼Œåˆ›å»ºå‡ºæŒ‡å®šæ–¹æ³•çš„å¯¹è±¡
        Method methodCall1 = cls.getDeclaredMethod(&quot;method2&quot;, int.class);

        // åœ¨è¿è¡Œæ—¶è°ƒç”¨è¯¥æ–¹æ³•
        methodCall1.invoke(obj, 19);

        // é€šè¿‡å°†å­—æ®µåå­—ä½œä¸ºå‚æ•°ï¼Œæä¾›åˆ° getDeclaredField() æ–¹æ³•
        // åˆ›å»ºå‡ºæŒ‡å®šå­—æ®µçš„å¯¹è±¡æ¥
        Field field = cls.getDeclaredField(&quot;s&quot;);

        // è¿™ä¸ªè¯­å¥å®ç°äº†åœ¨æ— å…³ä¹è¯¥å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰è®¿é—®æŒ‡ç¤ºç¬¦
        // çš„æƒ…å†µä¸‹ï¼Œå¯¹è¯¥å­—æ®µçš„è®¿é—®
        field.setAccessible(true);

        // è¿™é‡Œçš„ set() æ–¹æ³•ï¼Œå–äº†è¿™ä¸ªå¯¹è±¡åŠè¦èµ‹ç»™ç§æœ‰å­—æ®µâ€˜sâ€™
        // çš„æ–°å€¼
        field.set(obj, &quot;Java&quot;);

        // ç»ç”±æä¾›ä½œä¸ºå‚æ•°çš„æ–¹æ³•åå­—ç»™ getDeclaredMethod()
        // åˆ›å»ºå‡ºæŒ‡å®šæ–¹æ³•çš„å¯¹è±¡æ¥
        Method methodCall2 = cls.getDeclaredMethod(&quot;method1&quot;);

        // åœ¨è¿è¡Œæ—¶è°ƒç”¨è¯¥æ–¹æ³•
        methodCall2.invoke(obj);

        // ç»ç”±æä¾›ä½œä¸ºå‚æ•°çš„æ–¹æ³•åå­—ç»™ getDeclaredMethod()
        // åˆ›å»ºå‡ºæŒ‡å®šæ–¹æ³•çš„å¯¹è±¡æ¥
        Method methodCall3 = cls.getDeclaredMethod(&quot;method3&quot;);

        // è¿™ä¸ªè¯­å¥å®ç°åœ¨æ— å…³ä¹è¯¥æ–¹æ³•çš„è®¿é—®æŒ‡ç¤ºç¬¦çš„æƒ…å†µä¸‹
        // å¯¹è±¡å¯¹è¯¥æ–¹æ³•çš„è®¿é—®
        methodCall3.setAccessible(true);

        // åœ¨è¿è¡Œæ—¶è°ƒç ”è¿™ä¸ªæ–¹æ³•
        methodCall3.invoke(obj);
    }
}
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-console">java -jar build/libs/com.xfoss.learningJava-0.0.1.jar                             î‚² âœ” 
---------------------
ç±»çš„åå­—ä¸º com.xfoss.Reflection.Test
---------------------
æ„é€ å™¨çš„åå­—ä¸º com.xfoss.Reflection.Test
---------------------
ç±»çš„å…¬å…±æ–¹æ³•åˆ†åˆ«ä¸ºï¼š
method2
method1
method3
------------------
è¯¥æ•°å­—ä¸º 19
------------------
è¯¥å­—ç¬¦ä¸²ä¸º Java
------------------
ç§æœ‰æ–¹æ³•è¢«è°ƒç”¨äº†
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Ch19_Appendix_A.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Ch19_Appendix_A.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
